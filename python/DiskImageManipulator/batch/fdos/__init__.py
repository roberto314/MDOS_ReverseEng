# Ths file is part of: ditool.py - The Disk Image Tool
# 2025, R. Offner
import os

# Copy as Python - from 010 Editor - byte count: 3072 (0xC00)
fdos_boot = b''.join([
	b'\xBD\x24\x0C\xDE\x0B\x8E\xA0\x49\xAD\x00\x20\xF7\xCE\x24\x0C\xDF',
	b'\x0B\x4F\x97\x0D\x97\x00\x86\x02\x97\x01\xCE\x2F\xFF\xDF\x06\xCE',
	b'\x26\x00\x8D\x07\xCE\x26\x00\xDF\x0B\x6E\x00\xBD\x25\x23\xBD\x25',
	b'\x0E\xDF\x04\x7F\x00\x03\xDE\x04\xD6\x01\xF7\x80\x1A\xBD\x24\x89',
	b'\xC6\x9C\xF7\x80\x18\xBD\x24\x89\xBD\x24\x89\xBD\x24\x89\xF6\x80',
	b'\x18\xC5\x01\x27\x10\xC5\x02\x27\xF5\xB6\x80\x1B\xA7\x00\x9C\x06',
	b'\x27\x0C\x08\x20\xE9\x8D\x0F\x26\xCD\xBD\x24\xF8\x20\xC0\x8D\x06',
	b'\x26\xC4\xBD\x24\xF8\x39\xF6\x80\x18\xD7\x02\x86\xD0\xB7\x80\x18',
	b'\xBD\x25\xD7\xD6\x02\xC4\x1C\x26\x01\x39\xC4\x10\x27\x09\xF6\x80',
	b'\x1A\xC1\x0A\x26\x02\x5F\x39\xD6\x03\x5C\xD7\x03\xC1\x06\x26\xE9',
	b'\xF6\x80\x1A\xD7\x01\xCE\x00\x00\x8D\x4B\x8D\x49\xCE\x24\xD4\x8D',
	b'\x41\xCE\x24\xBE\x8D\x3C\xCE\x24\xC7\x8D\x37\x7E\x24\x03\x0D\x0A',
	b'\x15\x43\x48\x45\x43\x4B\x04\x20\x2D\x20\x44\x49\x53\x4B\x20\x45',
	b'\x52\x52\x4F\x52\x0D\x0A\x15\x04\x0D\x0A\x15\x4E\x4F\x54\x20\x52',
	b'\x45\x41\x44\x59\x04\x0D\x0A\x15\x50\x52\x4F\x54\x45\x43\x54\x45',
	b'\x44\x04\x7E\xE0\x7E\x7E\xE0\xC8\x37\xF6\x80\x1A\xC1\x0A\x26\x07',
	b'\x7C\x00\x00\xBD\x25\x0E\x5F\xD7\x01\xF7\x80\x1A\x33\x39\xD6\x00',
	b'\xF7\x80\x1B\xBD\x24\x89\xC6\x1B\xF7\x80\x18\xBD\x25\xD7\xC5\x10',
	b'\x26\xEC\x39\x36\x96\x0D\xBD\x25\xAC\x32\xDF\x12\xF6\x80\x18\xCE',
	b'\x4F\xFF\x08\x09\x09\x26\xFB\xC6\x0B\xF7\x80\x18\xBD\x25\xD7\xCE',
	b'\x40\x00\xF6\x80\x18\x09\x27\x11\xC5\x02\x26\xF6\xF6\x80\x18\x09',
	b'\x27\x07\xC5\x02\x27\xF6\xDE\x12\x39\xCE\x24\xD8\x7E\x24\xB4\x8D',
	b'\xC2\x8D\xAB\x7F\x00\x03\xDF\x04\xDE\x04\xD6\x01\xF7\x80\x1A\xBD',
	b'\x24\x89\xC6\xBC\xF7\x80\x18\xBD\x24\x89\xBD\x24\x89\xBD\x24\x89',
	b'\xF6\x80\x18\xC5\x01\x27\x10\xC5\x02\x27\xF5\xA6\x00\xB7\x80\x1B',
	b'\x9C\x06\x27\x11\x08\x20\xE9\xC5\x40\x27\x05\xCE\x24\xE5\x20\xBC',
	b'\xBD\x24\xF8\x20\xBE\xBD\x25\xD7\xBD\x24\xF8\x39\x84\x03\x36\xDF',
	b'\x09\xCE\x00\x0D\x4C\x16\x96\x0D\x4C\x08\x4A\x26\xFC\xB6\x80\x19',
	b'\xA7\x00\xCE\x00\x0D\x08\x5A\x26\xFC\xA6\x00\xB7\x80\x19\x32\x97',
	b'\x0D\xB7\x80\x14\xDE\x09\x39\xBD\x24\x89\xBD\x24\x89\xF6\x80\x18',
	b'\xC5\x01\x26\xF3\x39\x07\x97\x06\x8D\x03\x97\x07\x39\x37\xC6\x08',
	b'\x7F\x00\x18\xB6\x80\x1C\x84\x40\x48\x74\x00\x18\x9A\x18\x97\x18',
	b'\xCE\x29\x86\x86\xFF\xB7\x30\x55\xBD\x28\x9F\x8E\xA0\x49\xBD\x2A',
	b'\x22\x20\xF8\x7E\xE1\xD1\x7E\xE1\xAC\x7E\x26\x1C\xDF\x09\xCE\x80',
	b'\x1C\xA7\x00\x86\x36\xA7\x01\x86\x3E\xA7\x01\x6D\x01\x2A\xFC\xA6',
	b'\x00\xDE\x09\x39\x7D\x30\x55\x26\xDA\x20\xDE\x7F\x30\x55\x7E\x2A',
	b'\x3A\x86\x03\x20\x08\x86\x02\x7F\x30\x57\x7F\x30\x54\x36\x86\x02',
	b'\x97\x00\x4F\x97\x01\xBD\x25\x23\x96\x01\xB7\x30\x56\xCE\x31\x76',
	b'\xDF\x06\xCE\x30\x77\xBD\x24\x2E\xCE\x30\x77\x0F\x9F\x09\xC6\x10',
	b'\xFF\x30\x63\x8E\x30\x66\xA6\x00\x81\xFF\x27\x42\x32\xA1\x00\x26',
	b'\x0B\x08\x5A\x26\xF7\x9E\x09\x01\x0E\x7E\x27\x2D\xC1\x09\x24\x05',
	b'\xCE\x28\x17\x20\x20\x08\x5A\x26\xFC\xC6\x10\x08\x5A\x26\xFC\x09',
	b'\x9C\x06\x27\x03\x08\x20\xC7\x9E\x09\x01\x0E\x96\x01\x81\x09\x26',
	b'\xA7\xCE\x27\xC5\x32\xBD\x28\xAE\xBD\x28\x9F\x7E\x24\x03\x9E\x09',
	b'\x01\x0E\x33\xC1\x03\x26\x05\xCE\x27\xD9\x20\xE9\x37\x7C\x00\x06',
	b'\xFF\x30\x63\x0F\x9F\x09\x8E\x30\x66\xC6\x10\x32\xA7\x00\x08\x5A',
	b'\x26\xF9\x9E\x09\x01\x0E\x7D\x30\x57\x26\x0F\xB6\x30\x5B\xB0\x30',
	b'\x59\x4C\x16\x54\x54\x5C\x1B\xB7\x30\x57\xA6\x02\xE6\x03\xF0\x30',
	b'\x57\x82\x00\x2B\xAC\xA7\x22\xE7\x23\x6F\x02\xF6\x30\x57\xE7\x03',
	b'\xEB\x01\x4F\x4C\xC0\x0A\x24\xFB\x4A\xCB\x0A\xE7\x21\xAB\x00\xA7',
	b'\x20\x86\xFF\xA7\x10\xB6\x30\x58\xA7\x04\x32\x20\x10\x32\x81\x02',
	b'\x26\x49\x7D\x30\x54\x27\x06\xCE\x28\x2B\x7E\x26\xB5\xF6\x30\x5B',
	b'\xF0\x30\x59\x5C\xE1\x03\x23\x06\xCE\x27\xEB\x7E\x26\xB5\xC6\x08',
	b'\x0F\x9F\x09\x8E\x30\x58\x32\xA7\x05\x08\x5A\x26\xF9\x9E\x09\x01',
	b'\x0E\xFE\x30\x63\xF6\x30\x58\xA6\x14\x27\x03\x11\x26\x1F\xE7\x14',
	b'\xB6\x30\x56\x97\x01\xCE\x30\x77\xBD\x25\x61\xFE\x30\x63\xB6\x30',
	b'\x58\x81\xFF\x27\x0E\x6D\x14\x27\x0A\xA1\x14\x27\x06\xCE\x28\x01',
	b'\x7E\x26\xB5\xEE\x1B\xFF\x30\x5F\xFE\x30\x63\xEE\x19\xFF\x30\x5D',
	b'\xFE\x30\x63\xEE\x17\xDF\x06\xFF\x30\x5B\xFE\x30\x63\xA6\x10\x97',
	b'\x00\xA6\x11\x97\x01\xA6\x14\xB7\x30\x58\xEE\x15\xFF\x30\x59\xDF',
	b'\x04\xFE\x30\x63\x39\x44\x49\x53\x4B\x20\x46\x55\x4C\x4C\x20\x2D',
	b'\x20\x50\x41\x43\x4B\x0D\x0A\x15\x04\x46\x49\x4C\x45\x20\x4E\x4F',
	b'\x54\x20\x46\x4F\x55\x4E\x44\x0D\x0A\x15\x04\x46\x49\x4C\x45\x20',
	b'\x46\x55\x4C\x4C\x20\x2D\x20\x52\x45\x4E\x41\x4D\x45\x0D\x0A\x15',
	b'\x04\x46\x49\x4C\x45\x20\x54\x59\x50\x45\x20\x4D\x49\x53\x4D\x41',
	b'\x54\x43\x48\x0D\x0A\x15\x04\x50\x41\x53\x53\x57\x4F\x52\x44\x20',
	b'\x49\x4E\x56\x41\x4C\x49\x44\x0D\x0A\x15\x04\x46\x49\x4C\x45\x20',
	b'\x41\x4C\x52\x45\x41\x44\x59\x20\x45\x58\x49\x53\x54\x53\x0D\x0A',
	b'\x15\x04\xCE\x28\x96\xBD\x28\x9F\x20\x0A\x86\x3F\xBD\x26\x34\x86',
	b'\x20\xBD\x26\x34\xCE\x30\x04\xBD\x26\x16\x4D\x27\xFA\x81\x0A\x27',
	b'\xF6\x81\x03\x26\x03\x7E\x2A\x22\x81\x18\x27\xD6\x81\x0D\x27\x1B',
	b'\x81\x0F\x26\x0D\x86\x5F\xBD\x26\x34\x8C\x30\x04\x27\xD9\x09\x20',
	b'\xD6\x8C\x30\x4C\x27\xD1\xA7\x00\x08\x20\xCC\x86\x04\xA7\x00\xFF',
	b'\x30\x02\xBD\x28\xAE\x39\x20\x44\x45\x4C\x45\x54\x45\x44\x04\x8D',
	b'\x06\x20\x0B\xBD\x26\x34\x08\xA6\x00\x81\x04\x26\xF6\x39\xFF\x28',
	b'\xC6\xCE\x28\xBA\x8D\xF1\xFE\x28\xC6\x39\x0D\x0A\x15\xFF\xFF\xFF',
	b'\xFF\x04\xFF\xFF\xFF\xFF\x30\x05\xA6\x00\x81\x20\x26\x03\x08\x20',
	b'\xF7\x4D\x39\x8D\xF3\xFF\x30\x00\x0F\x9F\x09\xCE\x29\x05\xBE\x30',
	b'\x00\x34\x08\x32\x81\x20\x27\xFB\xE6\x00\x27\x11\x11\x27\xF3\x08',
	b'\x8C\x29\x83\x27\x0C\xE6\x00\x26\xF6\x08\x08\x20\xE1\x08\xBF\x30',
	b'\x00\x9E\x09\x01\x0E\x39\x4C\x4F\x41\x44\x00\x2D\x3D\x52\x55\x4E',
	b'\x00\x2D\x59\x53\x41\x56\x45\x00\x2D\x65\x45\x58\x49\x54\x00\xE0',
	b'\xD0\x44\x4F\x53\x00\x26\x00\x50\x41\x43\x4B\x00\x2A\x52\x49\x4E',
	b'\x49\x54\x00\x2B\x39\x54\x45\x53\x54\x00\x2F\x05\x43\x41\x54\x41',
	b'\x4C\x4F\x47\x00\x2E\x2B\x43\x41\x54\x00\x2E\x2B\x46\x49\x4C\x45',
	b'\x53\x00\x2E\x24\x48\x4F\x4D\x45\x00\x2C\xB5\x43\x52\x45\x41\x54',
	b'\x45\x00\x2C\x7D\x50\x52\x49\x4E\x54\x00\x26\x3B\x52\x45\x4E\x41',
	b'\x4D\x45\x00\x2C\xBE\x44\x45\x4C\x45\x54\x45\x00\x2C\xF6\x50\x55',
	b'\x52\x47\x45\x00\x2C\xF6\x53\x57\x54\x50\x43\x20\x56\x31\x2E\x30',
	b'\x20\x28\x43\x29\x20\x31\x39\x37\x37\x04\x0D\x0A\x15\xFF\xFF\x46',
	b'\x44\x4F\x53\x20\x52\x45\x41\x44\x59\x04\x46\x49\x4C\x45\x20\x4E',
	b'\x41\x4D\x45\x04\x46\x49\x52\x53\x54\x20\x41\x44\x44\x52\x45\x53',
	b'\x53\x04\x4C\x41\x53\x54\x20\x41\x44\x44\x52\x45\x53\x53\x20\x04',
	b'\x50\x52\x4F\x47\x52\x41\x4D\x20\x53\x54\x41\x52\x54\x04\x23\x20',
	b'\x4F\x46\x20\x53\x45\x43\x54\x4F\x52\x53\x20\x28\x48\x45\x58\x29',
	b'\x04\x41\x52\x45\x20\x59\x4F\x55\x20\x53\x55\x52\x45\x04\x42\x41',
	b'\x44\x20\x54\x52\x41\x43\x4B\x20\x26\x20\x53\x45\x43\x54\x4F\x52',
	b'\x20\x23\x04\x4E\x45\x57\x20\x04\x54\x45\x53\x54\x20\x44\x4F\x4E',
	b'\x45\x04\x8E\xA0\x45\xCE\x2A\x22\xDF\x0B\xCE\x80\x1C\xC6\xFF\xE7',
	b'\x00\xC6\x3E\xE7\x01\x86\xFF\xB7\x30\x55\xCE\x29\x9A\xBD\x28\x9F',
	b'\xBD\x28\x54\xCE\x30\x04\xBD\x28\xD3\x8C\x29\x83\x27\x07\xEE\x00',
	b'\x6E\x00\xBD\x2A\x72\xCE\x30\x04\xBD\x28\xC8\x81\x04\x27\xE1\x09',
	b'\x86\x24\xA7\x00\xFF\x30\x00\xBD\x2A\xF0\x86\x11\xB7\x30\x58\x7E',
	b'\x2D\x5E\xFE\x30\x00\xBD\x28\xC8\x81\x30\x2B\x04\x81\x39\x2F\x05',
	b'\x4F\xBD\x25\xAC\x39\x80\x30\x81\x03\x2F\x06\xCE\x2A\xA1\x7E\x26',
	b'\xB5\xBD\x25\xAC\x08\xBD\x28\xC8\x81\x2C\x26\x01\x08\xFF\x30\x00',
	b'\x39\x44\x52\x49\x56\x45\x20\x45\x52\x52\x4F\x52\x04\xCE\x30\x6F',
	b'\x20\x03\xCE\x30\x67\xFF\x30\x61\xC6\x08\x86\x20\xA7\x00\x08\x5A',
	b'\x26\xFA\xFE\x30\x00\xA6\x00\x08\xFF\x30\x00\x81\x20\x27\x20\x81',
	b'\x04\x27\x1C\x81\x2C\x27\x18\xFE\x30\x61\xA7\x00\x08\x8C\x30\x6F',
	b'\x27\x0D\x8C\x30\x77\x27\x08\xFF\x30\x61\xFE\x30\x00\x20\xD6\x39',
	b'\x36\xC6\x08\xFF\x30\x61\xCE\x30\x6F\x86\x20\xA7\x00\x08\x5A\x26',
	b'\xFA\xFE\x30\x61\x32\x39\xBD\x2A\x72\xBD\x28\xC8\x81\x04\x27\x0A',
	b'\x81\x30\x25\x17\x81\x3A\x24\x13\x20\xEC\xCE\x29\xAA\xBD\x28\xA7',
	b'\xBD\x28\x4A\xCE\x30\x04\xFF\x30\x00\x20\xDE\xBD\x2A\xB2\xBD\x2A',
	b'\xF0\x81\x2C\x26\x03\xBD\x2A\xAD\x39\xBD\x2A\x72\xCE\x29\xF1\xBD',
	b'\x28\xA7\xBD\x28\x4A\xCE\x30\x04\xBD\x28\xC8\x81\x59\x27\x03\x7E',
	b'\x2A\x22\xBD\x25\x23\x4F\x97\x00\x97\x01\xD6\x00\xF7\x80\x1B\xC6',
	b'\x1B\xF7\x80\x18\xBD\x27\xC4\xBD\x27\xC4\xF6\x80\x18\xC5\x01\x26',
	b'\xF9\xC6\xF4\xF7\x80\x18\xC6\x2E\x4F\xBD\x2C\x70\x5A\x26\xFA\x86',
	b'\xFC\xBD\x2C\x70\xC6\x0B\x4F\xBD\x2C\x70\x5A\x26\xFA\xC6\x06\x4F',
	b'\xBD\x2C\x70\x5A\x26\xFA\x86\xFE\xBD\x2C\x70\x96\x00\xBD\x2C\x70',
	b'\x4F\xBD\x2C\x70\x96\x01\xBD\x2C\x70\x86\x01\xBD\x2C\x70\x86\xF7',
	b'\xBD\x2C\x70\xC6\x11\x4F\xBD\x2C\x70\x5A\x26\xFA\x86\xFB\xBD\x2C',
	b'\x70\x5F\x86\xE5\xBD\x2C\x70\x5A\x26\xFA\x86\xF7\xBD\x2C\x70\xC6',
	b'\x0B\x4F\xBD\x2C\x70\x5A\x26\xFA\xD6\x01\x5C\xD7\x01\xC1\x0A\x26',
	b'\xAC\xF6\x80\x18\xC5\x01\x27\x02\x20\xF7\x4F\x97\x01\x96\x00\x4C',
	b'\x97\x00\x81\x23\x27\x03\x7E\x2B\x5A\x4F\x97\x00\x97\x01\xCE\x2F',
	b'\xFF\xDF\x06\xCE\x24\x00\xBD\x25\x5F\x4F\x97\x01\x86\x02\x97\x00',
	b'\xCE\x31\x76\xDF\x06\xCE\x30\x77\x86\x24\xA7\x00\x08\x86\x44\xA7',
	b'\x00\x08\x86\x4F\xA7\x00\x08\x86\x53\xA7\x00\xC6\x0C\x86\x20\x08',
	b'\xA7\x00\x08\x5A\x26\xFA\x6F\x01\x6F\x02\x6F\x04\x86\x14\xA7\x03',
	b'\x86\xFF\xA7\x10\x86\x03\xA7\x20\x4F\xA7\x21\xA7\x24\x6F\x00\x9F',
	b'\x09\x8E\x24\x00\xAF\x05\x8E\x2F\xFF\xAF\x07\x8E\x26\x00\xAF\x09',
	b'\x8E\x01\x4A\xAF\x22\x9E\x09\xCE\x30\x77\xBD\x25\x61\x7E\x2A\x22',
	b'\x37\xF6\x80\x18\xC5\x02\x27\xF9\xB7\x80\x1B\x33\x39\x4F\xB7\x30',
	b'\x58\xBD\x2B\x06\xCE\x29\xDE\xBD\x28\xA7\xBD\x28\x4A\xCE\x30\x04',
	b'\xBD\x2D\xFB\x25\xEF\xB7\x30\x57\xCE\x00\x00\xFF\x30\x59\xFF\x30',
	b'\x5B\xCE\x26\x00\xFF\x30\x5D\xFF\x30\x5F\x86\x02\xB7\x30\x54\xBD',
	b'\x26\x4D\x7E\x2A\x22\xBD\x2A\x72\xBD\x25\x23\x7E\x2A\x22\x86\xFF',
	b'\xB7\x30\x58\xBD\x2B\x06\xBD\x26\x41\x86\x02\x97\x00\xB6\x30\x56',
	b'\x97\x01\xFF\x30\x63\xCE\x2A\x13\xBD\x28\xA7\xBD\x2B\x1A\xC6\x10',
	b'\xFE\x30\x63\x9F\x09\x0F\x8E\x30\x66\x32\xA7\x00\x08\x5A\x26\xF9',
	b'\x9E\x09\x01\x0E\x20\x2A\x86\xFF\xB7\x30\x58\xBD\x2B\x06\xB6\x30',
	b'\x67\x81\x24\x26\x03\x7E\x2D\xA5\xBD\x26\x41\x86\x02\x97\x00\xB6',
	b'\x30\x56\x97\x01\x6F\x14\xC6\x10\x86\x20\xA7\x00\x08\x5A\x26\xFA',
	b'\xDE\x0B\xFF\x30\x65\xCE\x2D\x2A\xDF\x0B\xCE\x31\x76\xDF\x06\xCE',
	b'\x30\x77\xBD\x25\x5F\xFE\x30\x65\xDF\x0B\x7E\x2A\x22\x86\x22\xB7',
	b'\x30\x58\x8D\x03\x7E\x2A\x22\xBD\x2B\x06\xBD\x26\x41\xDE\x04\xBD',
	b'\x24\x2E\xFE\x30\x5D\xFF\xA0\x48\x39\x86\x22\xB7\x30\x58\x8D\xE7',
	b'\x8E\xA0\x49\x6E\x00\x86\x22\xB7\x30\x58\xBD\x2B\x06\xCE\x29\xB4',
	b'\xBD\x2D\xD5\xFF\x30\x59\xCE\x29\xC2\xBD\x2D\xD5\xFF\x30\x5B\xCE',
	b'\x29\xD0\xBD\x2D\xD5\xFF\x30\x5D\xB6\x30\x67\x81\x24\x26\x1F\x86',
	b'\x11\xB7\x30\x58\xBD\x28\x4A\xB6\x30\x04\x81\x24\x26\x07\xB6\x30',
	b'\x05\x81\x24\x27\x09\xCE\x2D\xB9\xBD\x28\x9F\x7E\x2A\x22\xBD\x26',
	b'\x45\xDE\x04\xBD\x25\x61\x7E\x2A\x22\x53\x59\x53\x54\x45\x4D\x20',
	b'\x46\x49\x4C\x45\x20\x2D\x20\x41\x43\x43\x45\x53\x53\x20\x44\x45',
	b'\x4E\x49\x45\x44\x04\xFF\x30\x61\xFE\x30\x61\xBD\x28\xA7\xBD\x28',
	b'\x4A\xCE\x30\x04\xBD\x28\xC8\x8D\x12\x25\xED\xB7\x2D\xF9\x8D\x0B',
	b'\x25\xE6\xB7\x2D\xFA\xFE\x2D\xF9\x39\x81\x11\x8D\x0E\x25\x0B\x48',
	b'\x48\x48\x48\x16\x8D\x05\x25\x02\x1B\x0C\x39\xA6\x00\x08\x80\x30',
	b'\x2B\x10\x81\x09\x2F\x0A\x81\x11\x2B\x08\x81\x16\x2E\x04\x80\x07',
	b'\x0C\x39\x0D\x39\xC6\xFF\xF7\x30\x54\x20\x03\x7F\x30\x54\xBD\x2A',
	b'\x72\x86\x02\x97\x00\x4F\x97\x01\xBD\x25\x23\x86\x10\xBD\x26\x34',
	b'\x86\x16\xBD\x26\x34\xC6\x03\x37\xCE\x31\x76\xDF\x06\xCE\x30\x77',
	b'\xBD\x24\x2E\xCE\x30\x77\xA6\x00\x81\xFF\x27\x4D\xC6\x08\xA6\x00',
	b'\xBD\x26\x34\x08\x5A\x26\xF7\xC6\x08\x08\x5A\x26\xFC\x86\x20\xBD',
	b'\x26\x34\x7D\x30\x54\x27\x16\x8D\x74\x8D\x72\x08\x8D\x6F\x8D\x6D',
	b'\x8D\x69\x8D\x67\x8D\x65\xBD\x28\xAE\xC6\x05\x20\x10\x33\x5A\x26',
	b'\x05\xBD\x28\xAE\xC6\x03\x37\xC6\x10\x20\x02\xC6\x20\x08\x5A\x26',
	b'\xFC\x09\x9C\x06\x27\xA2\x08\x20\xAD\xFF\x30\x61\x33\xBD\x28\xAE',
	b'\xCE\x2E\xC8\xBD\x28\xA7\xFE\x30\x61\xC6\x12\x08\x5A\x26\xFC\xBD',
	b'\x2E\xEB\xBD\x28\xAE\x7E\x2A\x22\x53\x45\x43\x54\x4F\x52\x53\x20',
	b'\x52\x45\x4D\x41\x49\x4E\x49\x4E\x47\x20\x28\x48\x45\x58\x29\x20',
	b'\x20\x04\xA6\x00\x8D\x0E\xA6\x00\x08\x20\x0D\x8D\xF5\x8D\xF3\x86',
	b'\x20\x7E\x26\x34\x44\x44\x44\x44\x84\x0F\x8B\x30\x81\x39\x23\x02',
	b'\x8B\x07\x7E\x26\x34\xBD\x2A\x72\xBD\x25\x23\xCE\x2F\x30\xDF\x0B',
	b'\x86\x00\x97\x00\x97\x01\xCE\x19\xFF\xDF\x06\xCE\x10\x00\xBD\x24',
	b'\x2E\x96\x00\x81\x21\x26\xF4\xCE\x2A\x18\xBD\x28\x9F\x7E\x2A\x22',
	b'\x96\x01\x4C\x81\x0A\x26\x04\x4F\x7C\x00\x00\x97\x01\x20\xDC\x38',
	b'\x30\x20\x4C\x49\x42\x36\x35\x20\x4A\x53\x52\x20\x43\x52\x4C\x46',
	b'\x04\x31\x31\x39\x30\x20\x20\x4A\x53\x52\x20\x4F\x55\x54\x50\x55',
	b'\x54\x04\x31\x32\x30\x30\x20\x20\x4A\x4D\x50\x20\x52\x45\x53\x54',
	b'\x52\x54\x04\x31\x32\x31\x30\x20\x4C\x49\x42\x37\x20\x4C\x44\x53',
	b'\x20\x53\x41\x56\x45\x58\x04\x31\x32\x32\x30\x20\x20\x4E\x4F\x50',
	b'\x04\x31\x32\x33\x30\x20\x20\x43\x4C\x49\x04\x31\x32\x34\x30\x20',
	b'\x20\x50\x55\x4C\x42\x04\x31\x32\x35\x30\x20\x20\x43\x4D\x50\x42',
	b'\x20\x23\x33\x20\x49\x53\x20\x49\x54\x20\x52\x45\x41\x44\x04\x31',
	b'\x32\x36\x30\x20\x20\x42\x4E\x45\x20\x4C\x49\x42\x37\x35\x04\x31',
	b'\x32\x37\x30\x20\x20\x4C\x44\x58\x20\x23\x4E\x4F\x54\x46\x4E\x44',
	b'\x04\x31\x32\x38\x30\x20\x20\x42\x52\x41\x20\x4C\x49\x42\x36\x35',
	b'\x04\x31\x32\x39\x30\x20\x4C\x49\x42\x37\x35\x20\x50\x53\x48\x42'])

class bcolors:
	#FAIL = '\033[91m\033[107m' #red inverse
	FAIL = '\033[91m'    #red
	OKGREEN = '\033[92m'       #green
	WARNING = '\033[93m'       #yellow
	OKBLUE = '\033[94m'        #dblue
	HEADER = '\033[95m'        #purple
	OKCYAN = '\033[96m'        #cyan
	ENDC = '\033[0m'
	BOLD = '\033[1m'
	UNDERLINE = '\033[4m'
#print(f'{bcolors.FAIL}{bcolors.ENDC}')
#print(f'{bcolors.OKGREEN}{bcolors.ENDC}')
#print(f'{bcolors.WARNING}{bcolors.ENDC}')
#print(f'{bcolors.OKBLUE}{bcolors.ENDC}')
#print(f'{bcolors.HEADER}{bcolors.ENDC}')
#print(f'{bcolors.OKCYAN}{bcolors.ENDC}')
#------------------------------------------
class class_FDOS(object):

	def __init__(self, diskstruct, verbose): # FDOS Standard values
		self.verbose = verbose
		self.TRACKS = diskstruct[0]
		self.SIDES = diskstruct[1]
		self.SECTORS = diskstruct[2]
		self.SECLEN = diskstruct[3]
		self.DIROFF = diskstruct[4]
		self.DIREND = diskstruct[5]
		self.ENTRYSZ = diskstruct[6]
		self.EMPTYVAL = diskstruct[7]
		#self.EMPTYVAL = 0xE5
		self.TOTALSEC = self.SECTORS  * self.SIDES * self.TRACKS
		self.IMGSIZE = self.TOTALSEC * self.SECLEN # Size is usually 89600 Bytes SSSD (FM)
		if verbose > 0:
			print(f'Imageformat:')
			print(f' Tracks: {self.TRACKS}')
			print(f' Sides: {self.SIDES}')
			print(f' Sectors: {self.SECTORS}')
			print(f' Bytes/Sectors: {self.SECLEN}')
			print(f' Directory at: 0x{self.DIROFF:04X}')
			print(f' Files at: 0x{self.DIREND:04X}')
			print(f' Size of entry: {self.ENTRYSZ}')
			print(f' Emptyvalue: {self.EMPTYVAL}')
	#----------------------------------
	def read_file(self, fn, type = 'binary'):
		if (type == 'binary'):
			try:
				with open(fn, "rb") as f:
					#print(f'{bcolors.OKGREEN}File: {fn} open as binary for reading.{bcolors.ENDC}')
					img = f.read()
					f.close()
					return img
			except Exception as e:
				print(f'{bcolors.FAIL}Binary File {fn} not found!{bcolors.ENDC}')
				#exit()
		else:
			try:
				with open(fn, "r") as f:
					#print(f'{bcolors.OKGREEN}File: {fn} open as text for reading.{bcolors.ENDC}')
					img = f.read()
					f.close()
					return img
			except Exception as e:
				print(f'{bcolors.FAIL}Text File {fn} not found!{bcolors.ENDC}')
				#exit()
	#----------------------------------
	# parses the directory block
	def get_dir(self, imgfile):
		entries = []
		entry = []
		imgstat = []
		while (imgfile[self.DIROFF] != 0xFF):
			entry.append((imgfile[self.DIROFF:(self.DIROFF+8)]).decode("ascii")) # Name
			entry.append((imgfile[(self.DIROFF+8):(self.DIROFF+16)]).decode("ascii")) # Password
			entry.append((imgfile[(self.DIROFF+16)])) # Start Track
			entry.append((imgfile[(self.DIROFF+17)])) # Start Sector
			entry.append((imgfile[(self.DIROFF+18)]*256 + imgfile[(self.DIROFF+19)])) # Size in Sectors
			FTYPE = int((imgfile[(self.DIROFF+20)]))
			FTYPETXT = ''
			if (FTYPE == 0x00):
				FTYPETXT = 'Blank'
			elif(FTYPE == 0x11):
				FTYPETXT = 'System'
			elif(FTYPE == 0x22):
				FTYPETXT = 'Object'
			elif(FTYPE == 0x55):
				FTYPETXT = 'Basic'
			elif(FTYPE == 0x77):
				FTYPETXT = 'Cores'
			elif(FTYPE == 0x99):
				FTYPETXT = 'B.Data'
			entry.append(FTYPETXT) # Filetype
			entry.append((imgfile[(self.DIROFF+21)]*256 + imgfile[(self.DIROFF+22)])) # Starting Address (in Memory)
			entry.append((imgfile[(self.DIROFF+23)]*256 + imgfile[(self.DIROFF+24)])) # Ending Address (in Memory)
			entry.append((imgfile[(self.DIROFF+25)]*256 + imgfile[(self.DIROFF+26)])) # Program Start Address
			entry.append((imgfile[(self.DIROFF+27)]*256 + imgfile[(self.DIROFF+28)])) # High Line (for Basic adn co-res)
			entry.append((imgfile[(self.DIROFF+29)])) # Spares
			entry.append((imgfile[(self.DIROFF+30)])) # Spares
			entry.append((imgfile[(self.DIROFF+31)])) # Spares
			
			self.DIROFF += self.ENTRYSZ
			entries.append(entry)
			entry = []
		imgstat.append((imgfile[(self.DIROFF+16)])) # Next free Track
		imgstat.append((imgfile[(self.DIROFF+17)])) # Next free Sector
		imgstat.append((imgfile[(self.DIROFF+18)]*256 + imgfile[(self.DIROFF+19)])) # Total free Sectors
		return entries, imgstat
	#----------------------------------
	# adds a file to the directory including all the necessary data
	def add_dir_enty(self, img, pos, name, passw, sttrk, stsec, siz, typ, saddr, eaddr, pc, hilin, sp0, sp1, sp2):
		ap = pos * self.ENTRYSZ + self.DIROFF # actual Position
		text = bytearray(0x20 for _ in range(16)) # Clear out name and password
		namtxt = (name.encode("ascii")).strip()
		passtxt = (passw.encode("ascii")).strip()
		text[0:len(namtxt)] = namtxt
		text[8:8+len(passtxt)] = passtxt
		img[ap:ap+16] = text
		img[ap+16] = int(sttrk)
		img[ap+17] = int(stsec)
		img[ap+18:ap+20] = siz.to_bytes(2, 'big')
		img[ap+20] = typ
		img[ap+21:ap+23] = saddr.to_bytes(2, 'big')
		img[ap+23:ap+25] = eaddr.to_bytes(2, 'big')
		img[ap+25:ap+27] = pc.to_bytes(2, 'big')
		img[ap+27:ap+29] = hilin.to_bytes(2, 'big')
		img[ap+29] = sp0
		img[ap+30] = sp1
		img[ap+31] = sp2
	#----------------------------------
	def chs_to_offset(self, c, h, s):
		offset = (self.SECTORS * self.SECLEN * c) + self.SECLEN * s
		return offset
	#----------------------------------
	def offset_to_chs(self, off):
		totalsec = int(off / self.SECLEN)
		track = (totalsec / self.SECTORS) # How many Tracks are these
		s = (totalsec % self.SECTORS)  # How many Sectors are rest
		c = int(track)
		h = 0
		if self.verbose > 0:
			print(f'off: {off:04X} c: {c} s: {s} totalsec: {totalsec} Track: {track}')
		return c, h, s
	#----------------------------------
	# adds the last entry which indicates no more files and free space on floppy
	def add_last_enty(self, img, pos, off):
		totalsec = (self.IMGSIZE - off) / self.SECLEN
		nft,h,nfs = self.offset_to_chs(off)
		track = int(off / self.SECLEN) # How many Tracks are these
		print(f'Next Free Trk.: {nft}, Next Free Sec.: {nfs}, Tracks used: {track} TotalFree: {totalsec}, 0x{int(totalsec):02X}')		
		ap = pos * self.ENTRYSZ + self.DIROFF # actual Position
		clrpos = pos * self.ENTRYSZ + self.DIROFF
		zeros = bytearray(0 for _ in range(self.DIREND - clrpos)) # Clear out 
		if self.verbose > 0:
			print(f'Clear: {len(zeros)}, 0x{len(zeros):04X}, Clrpos: 0x{clrpos:04X}')
		img[ap:ap+len(zeros)] = zeros
		img[ap] = 0xFF # Signature for no more entries
		img[ap+16] = nft # Next free Track
		img[ap+17] = nfs # Next free Sector
		free = int(totalsec)
		if self.verbose > 0:
			print(f'Total Free Trk.: {free}, 0x{free:04X}')
		img[ap+18:ap+20] = (free).to_bytes(2, 'big')
	#----------------------------------
	def get_file(self, imgfile, e):
		data = bytearray()
		track = e[2]
		sector = e[3]
		for s in range(e[4]):
			off = self.chs_to_offset(track, 0, sector)
			data += imgfile[off:(off+self.SECLEN)]
			#print(f'Track: {track}, Sector: {sector}, Offset: 0x{off:04X}')
			sector += 1
			if sector >= self.SECTORS:
				sector = 0
				track += 1
		return data
	#----------------------------------
	def convert_stats(self, ent, stat):
		string = ''
		string = 'Name      Password  StartTrk StartSec SecSize   Type  Start  End  PCnt  Hi-Line Spares\n'
		#print(ent)
		for e in ent:
			#string += ('{:8}|{:8}|{:8}|{:8}|{:8}|{:02X}|{:04X}|{:04X}|{:04X}|{:04X}|{:02X}|{:02X}|{:02X}\n'.format(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12]))
			string += ('{:9};{:9};{:9};{:9};{:9};{:>7};0x{:04X};0x{:04X};0x{:04X};0x{:04X};0x{:02X};0x{:02X};0x{:02X}\n'.format(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12]))

		string += ('Next Free Track: {:3} Next Free Sector: {:3} Free Sectors: 0x{:04X}'.format(stat[0],stat[1], int(stat[2]))) + '\n'
		return string
	#----------------------------------
	def create_image(self):
		img = bytearray(self.EMPTYVAL for _ in range(self.IMGSIZE)) # make empty imagefile with correct size
		return img
	#----------------------------------
	# In FDOS this is not really usefull since the $DOS File is the bootsector and is like a 
	# normal file
	def create_boot_image(self):
		img = self.create_image()
		img[:len(fdos_boot)] = fdos_boot
		secsz = 20
		self.add_dir_enty(img, 0,'$DOS', '', 0,0,secsz,0,0x2400,0x2FFF,0x2600,0x3824,0x99,0xBD,0x42)
		self.add_last_enty(img, 1, self.DIREND)
		return img
	#----------------------------------
	def add_file(self, img, fdata, sttrk, stsec, siz):
		off = self.chs_to_offset(sttrk, 0, stsec)
		for idx in range(siz): # go through the sectors
			cstart = idx * self.SECLEN
			start = off + cstart
			img[start:start+self.SECLEN] = fdata[cstart:cstart+self.SECLEN]
	#----------------------------------
	def add_files(self, fdir, img):
		arr = os.listdir(fdir)
		numfiles = len(arr)-1 # remove stats file
		fn = fdir + 'stats'
		statslines = []
		statsfile = self.read_file(fn, 'text')
		statslines = (statsfile.split('\n'))[1:] # one line per track and start after header
		#----------------------------------
		# Here we add the filenames to the Directory
		# We need the stats file for Filetype, Startaddress, Endaddress, Program Counter,
		# Hiline (Basic) and three 'spares'.
		# Also the size can come from the stats file or from the actual filesize
		totalsz = 0
		c = 0
		h = 0
		s = 0
		for idx,line in enumerate(statslines):
			e = line.split(';')
			#print(f'Stats: {e} {idx}')
			if idx >= numfiles: # don't take the last line
				break
			name = e[0].strip()
			fn = name
			if ('/' in name):
				fn = name.replace('/', '_')
				#print(f'Looking for different name: {name}')
			fdata = self.read_file((fdir+fn), 'binary') # Get the filedata
			#-------------------------------------------------------------------------
			# Get the filesize from the actual file and pad it to the next sector (alternative)
			#-------------------------------------------------------------------------
			#tempsiz = len(fdata)/self.SECLEN  # Size (in sectors) from actual filesize
			#temprest = self.SECLEN - (len(fdata)%self.SECLEN)  # Rest in sectors
			#zeros = bytearray(0 for _ in range(temprest))
			#fdata += zeros
			#nsiz = int(len(fdata)/self.SECLEN)
			#print(f'Tempsiz: {tempsiz}, Temprest: {temprest}, new: {nsiz}')
			#siz = nsiz # Use actual filesize padded to next sectorboundry
			#-------------------------------------------------------------------------
			siz = int(e[4], 0) # Use size from stats file
			c,h,s = self.offset_to_chs(totalsz)
			totalsz += siz * self.SECLEN
			passw = e[1]
			if name == '$DOS':
				sttrk = int(e[2], 0)
				stsec = int(e[3], 0)
				totalsz += self.SECTORS * self.SECLEN # one track extra for directory
			else:
				sttrk = c
				stsec = s
				
			if 'Blank' in e[5]:
				typ = 0
			elif 'System' in e[5]:
				typ = 0x11
			elif 'Object' in e[5]:
				typ = 0x22
			elif 'Basic' in e[5]:
				typ = 0x55
			elif 'Cores' in e[5]:
				typ = 0x77
			elif 'B.Data' in e[5]:
				typ = 0x99
			saddr = int(e[6], 0)
			eaddr = int(e[7], 0)
			pc = int(e[8], 0)
			hilin = int(e[9], 0)
			sp0 = int(e[10], 0)
			sp1 = int(e[11], 0)
			sp2 = int(e[12], 0)
			print(f'Adding {name:8} to: {sttrk=:2} {stsec=:2} {siz=:2} NxtOff: {totalsz:>05X} Size of File: {len(fdata)/self.SECLEN:>5.1f}')
			self.add_dir_enty(img, idx, name, passw, sttrk, stsec, siz, typ, saddr, eaddr, pc, hilin, sp0, sp1, sp2)
			#----------------------------------
			# Now add the actual files to the Image
			self.add_file(img, fdata, sttrk, stsec, siz)
		#c,h,s = self.offset_to_chs(totalsz)
		self.add_last_enty(img, idx, totalsz)
		return img
