 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 1 - 02/18/2026 05:54:45 PM


       1/       0 :                             include "mdoseq.inc"
(1)    1/       0 :                     ; MDOS VERSION 03.00 -- SYSTEM EQUATE FILE -- JULY 25.1978
(1)    2/       0 :                     ; 
(1)    3/       0 :                     ; 
(1)    4/       0 :                     ; DEFINE TYPE OF MDOS--RESIDENT MDOS ONLY
(1)    5/       0 :                     ; 0000 A MDOSF$ EQU 0      .0 => MDOS, 1 => OEM MDOS
(1)    6/       0 :                     ; 0000 A MDOS9$ EQU 0      .0 => MDOS, 1 => MDOS09
(1)    7/       0 :                     
(1)    8/       0 :                     ; SKIP2 MACRO
(1)    9/       0 :                     ; THE GENERATED BYTE IS A "COMPARE INDEX IMMEDIATE".
(1)   10/       0 :                     ; THE EXECUTION OF THE BYTE WILL CHANGE THE CONDITION CODE
(1)   11/       0 :                     ; NO REGISTERS ARE AFFECTED. THUS. A ONE BYTE INSTRUCTION
(1)   12/       0 :                     ; IS FORMED THAT SKIPS FORWARD TWO BYTES.
(1)   13/       0 :                     
(1)   14/       0 :                     SKIP2    MACRO
(1)   15/       0 :                              FCB $8C
(1)   16/       0 :                              ENDM
(1)   17/       0 :                     
(1)   18/       0 :                     ; SKIP1 MACRO
(1)   19/       0 :                     ; THE SAME CONCEPT AS THE "SKIP2" MACRO IS USED, EXCEPT THE
(1)   20/       0 :                     ; A "BIT TEST ACCUMULATOR A IMMEDIATE" OP CODE IS GENERATED
(1)   21/       0 :                     
(1)   22/       0 :                     SKIP1    MACRO
(1)   23/       0 :                              FCB $85
(1)   24/       0 :                              ENDM
(1)   25/       0 :                     
(1)   26/       0 :                     ; SCALL MACRO (SYSTEM FUNCTION CALL)
(1)   27/       0 :                     SCALL    MACRO PAR
(1)   28/       0 :                              SWI
(1)   29/       0 :                              FCB  PAR
(1)   30/       0 :                              ENDM
(1)   31/       0 :                     ;
(1)   32/       0 :                     ; SYSCALLS USED
(1)   33/       0 :                     ; SYSTEM FUNCTION DEFINITION
(1)   34/       0 :                     
(1)   35/       0 : =$0                  RESRV1   EQU  $0 ; RESERVE A DEVICE
(1)   36/       0 : =$1                  RELES1   EQU  $1 ; RELEASE A DEVICE
(1)   37/       0 : =$2                  OPEN1    EQU  $2 ; OPEN A FILE
(1)   38/       0 : =$3                  CLOSE1   EQU  $3 ; CLOSE A FILE
(1)   39/       0 : =$4                  GETRC1   EQU  $4 ; READ A RECORD
(1)   40/       0 : =$5                  PUTRC1   EQU  $5 ; WRITE A RECORD
(1)   41/       0 : =$6                  REWND1   EQU  $6 ; POSITION TO BEGINNING OF FILE
(1)   42/       0 : =$7                  GETLS1   EQU  $7 ; READ LOGICAL SECTOR
(1)   43/       0 : =$8                  PUTLS1   EQU  $8 ; WRITE LOGICAL SECTOR
(1)   44/       0 : =$9                  KEYIN1   EQU  $9 ; CONSOLE INPUT
(1)   45/       0 : =$A                  DSPLY1   EQU  $A ; CONSOLE OUTPUT (TERM W/ CR)
(1)   46/       0 : =$B                  DSPLX1   EQU  $B ; CONSOLE OUTPUT (TERM W/ E01)
(1)   47/       0 : =$C                  DSPLZ1   EQU  $C ; CONSOLE OUTPUT (TERM W/ EOT, NO CHECK)
(1)   48/       0 : =$D                  CKBRK1   EQU  $D ; CHECK CONSOLE FOR BREAK KEY
(1)   49/       0 : =$E                  DREAD1   EQU  $E ; EROM DISK READ
(1)   50/       0 : =$F                  DWRIT1   EQU  $F ; EROM DISK WRITE
(1)   51/       0 : =$10                 MOVE1    EQU $10 ; MOVE A STRING
(1)   52/       0 : =$11                 CMPAR1   EQU $11 ; COMPARE STRINGS
(1)   53/       0 : =$12                 STCHB1   EQU $12 ; STORE BLANKS
(1)   54/       0 : =$13                 STCHR1   EQU $13 ; STORE CHARACTERS
(1)   55/       0 : =$14                 ALPHA1   EQU $14 ; CHECK ALPHABETIC CHARACTER
(1)   56/       0 : =$15                 NUMD1    EQU $15 ; CHECK DECIMAL DIGIT
(1)   57/       0 : =$16                 ADDAM1   EQU $16 ; INCREMENT MEMORY (DOUBLE BYTE) BY A
(1)   58/       0 : =$17                 SUBAM1   EQU $17 ; DECREMENT MEMORY (DOUBLE BYTE) BY A
(1)   59/       0 : =$18                 MMA1     EQU $18 ; MULTIPLY (SHIFT LEFT) MEMORY BY A
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm(mdoseq.inc) - Page 2 - 02/18/2026 05:54:45 PM


(1)   60/       0 : =$19                 DMA1     EQU $19 ; DIVIDE (SHIFT RIGHT) MEMORY BY A
(1)   61/       0 : =$1A                 MDENT1   EQU $1A ; ENTER MDOS WITHOUT RELOADING
(1)   62/       0 : =$1B                 LOAD1    EQU $1B ; LOAD A FILE FROM DISK
(1)   63/       0 : =$1C                 DIRSM1   EQU $1C ; DIRECTORY SEARCH AND MODIFY
(1)   64/       0 : =$1D                 PFNAM1   EQU $1D ; PROCESS FILE NAME
(1)   65/       0 : =$1E                 ALUSM1   EQU $1E ; ALLOCATE USER MEMORY
(1)   66/       0 : =$1F                 CHANG1   EQU $1F ; CHANGE NAME/ATTRIBUTES
(1)   67/       0 : =$20                 MDERR1   EQU $20 ; MDOS ERROR MESSAGE HANDLER
(1)   68/       0 : =$21                 ALLOC1   EQU $21 ; ALLOCATE DISK SPACE
(1)   69/       0 : =$22                 DEALC1   EQU $22 ; RETURN DISK SPACE
(1)   70/       0 : =$23                 EWORD1   EQU $23 ; SET ERROR STATUS WORD FOR CHAIN
(1)   71/       0 : =$24                 TXBA1    EQU $24 ; TRANSFER X TO B,A
(1)   72/       0 : =$25                 TBAX1    EQU $25 ; TRANSFER B,A TO X
(1)   73/       0 : =$26                 XBAX1    EQU $26 ; EXCHANGE B,A AND X
(1)   74/       0 : =$27                 ADBX1    EQU $27 ; ADD B TO X
(1)   75/       0 : =$28                 ADAX1    EQU $28 ; ADD A TO X
(1)   76/       0 : =$29                 ADDAX1   EQU $29 ; ADD B,A TO X
(1)   77/       0 : =$2A                 ADXBA1   EQU $2A ; ADD X TO B,A
(1)   78/       0 : =$2B                 SUBX1    EQU $2B ; SUBTRACT B FROM X
(1)   79/       0 : =$2C                 SUAX1    EQU $2C ; SUBTRACT A FROM X
(1)   80/       0 : =$2D                 SUBAX1   EQU $2D ; SUBTRACT B,A FROM X
(1)   81/       0 : =$2E                 SUXBA1   EQU $2E ; SUBTRACT X FROM B,A
(1)   82/       0 : =$2F                 CPBAX1   EQU $2F ; COMPARE B.A TO X
(1)   83/       0 : =$30                 ASRX1    EQU $30 ; SHIFT X RIGHT (ARITHMETIC)
(1)   84/       0 : =$31                 ASLX1    EQU $31 ; SHIFT X LEFT (ARITHMETIC/LOGICAL)
(1)   85/       0 : =$32                 PSHX1    EQU $32 ; PUSH X ON STACK
(1)   86/       0 : =$33                 PULX1    EQU $33 ; PULL X FROM STACK
(1)   87/       0 : =$34                 PRINT1   EQU $34 ; PRINT-TERMINATE WITH CR
(1)   88/       0 : =$35                 PRINX1   EQU $35 ; PRINT-TERMINATE WITH EOT
(1)   89/       0 : =$36                 GETFD1   EQU $36 ; READ FDR (RESIDENT MDOS ONLY)
(1)   90/       0 : =$37                 PUTFD1   EQU $37 ; WRITE FDR (RESIDENT MDOS ONLY)
(1)   91/       0 : =$38                 PUTEF1   EQU $38 ; WRITE EOF (RESIDENT MDOS ONLY)
(1)   92/       0 : =$39                 EREAD1   EQU $39 ; DISK READ W/ ERR RETN
(1)   93/       0 : =$3A                 EWRIT1   EQU $3A ; DISK WRITE W/ ERR RETN
(1)   94/       0 : =$3B                 MREAD1   EQU $3B ; MULTIPLE SECTOR READ
(1)   95/       0 : =$3C                 MWRIT1   EQU $3C ; MULTIPLE SECTOR WRITE
(1)   96/       0 : =$3D                 MERED1   EQU $3D ; MULTIPLE SECTOR READ W/ ERR RETUR
(1)   97/       0 : =$3E                 MEWRT1   EQU $3E ; MULTIPLE SECTOR WRITE W/ ERR RETU
(1)   98/       0 : =$3F                 BOOT1    EQU $3F ; RELOAD MDOS
(1)   99/       0 :                     
(1)  100/       0 :                     ; 
(1)  101/       0 :                     ; ASCII Control Characters
(1)  102/       0 :                     ;
(1)  103/       0 : =$0                  NULL     EQU  $0 ; NULL
(1)  104/       0 : =$1                  SOH      EQU  $1 ; START OF HEADING
(1)  105/       0 : =$2                  STX      EQU  $2 ; START OF TEXT
(1)  106/       0 : =$3                  ETX      EQU  $3 ; END OF TEXT
(1)  107/       0 : =$4                  EDT      EQU  $4 ; END OF TRANSMISSION
(1)  108/       0 : =$5                  ENG      EQU  $5 ; ENGUIRY (WRU - WHO ARE YOU)
(1)  109/       0 : =$6                  ACK      EQU  $6 ; ACKNOWLEDGE
(1)  110/       0 : =$7                  BEL      EQU  $7 ; BELL
(1)  111/       0 : =$8                  BS       EQU  $8 ; BACKSPACE
(1)  112/       0 : =$9                  HT       EQU  $9 ; HORIZONTAL TAB
(1)  113/       0 : =$A                  LF       EQU  $A ; LINE FEED
(1)  114/       0 : =$B                  VT       EQU  $B ; VERTICAL TAB
(1)  115/       0 : =$C                  FF       EQU  $C ; FORM FEED
(1)  116/       0 : =$D                  CR       EQU  $D ; CARRIAGE RETURN
(1)  117/       0 : =$E                  SO       EQU  $E ; SHIFT OUT
(1)  118/       0 : =$F                  SI       EQU  $F ; SHIFT IN
(1)  119/       0 : =$10                 DLE      EQU $10 ; DATA LINK ESCAPE
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm(mdoseq.inc) - Page 3 - 02/18/2026 05:54:45 PM


(1)  120/       0 : =$11                 DC1      EQU $11 ; DEVICE CONTROL 1
(1)  121/       0 : =$12                 DC2      EQU $12 ; DEVICE CONTROL 2
(1)  122/       0 : =$13                 DC3      EQU $13 ; DEVICE CONTROL 4
(1)  123/       0 : =$14                 DC4      EQU $14 ; DEVICE CONTROL 4
(1)  124/       0 : =$15                 NAK      EQU $15 ; NEGATIVE ACKNOWLEDGe
(1)  125/       0 : =$16                 SYN      EQU $16 ; SYNCHRONOUS IDLE
(1)  126/       0 : =$17                 ETB      EQU $17 ; END OF TRANSMISSION BLOCK
(1)  127/       0 : =$18                 CAN      EQU $18 ; CANCEL
(1)  128/       0 : =$19                 EM       EQU $19 ; END OF MEDIUM
(1)  129/       0 : =$1A                 SUB      EQU $1A ; SUBSTITUTE
(1)  130/       0 : =$1B                 ESC      EQU $1B ; ESCAPE
(1)  131/       0 : =$1C                 FS       EQU $1C ; FILE SEPARATOR
(1)  132/       0 : =$1D                 GS       EQU $1D ; GROUP SEPARATOR
(1)  133/       0 : =$1E                 RS       EQU $1E ; RECORD SEPARATOR
(1)  134/       0 : =$1F                 US       EQU $1F ; UNIT SEPARATOR
(1)  135/       0 : =$20                 SPACE    EQU $20 ; SPACE (WORD SEPARATOR)
(1)  136/       0 : =$7F                 RUBOUT   EQU $7F ; DELETE (RUB OUT)
(1)  137/       0 :                     
(1)  138/       0 :                     ;
(1)  139/       0 :                     ; Special Character Equates
(1)  140/       0 :                     ; 
(1)  141/       0 : ='.'                 SUFDLM   EQU '.'  ; SUFFIX DELIMETER
(1)  142/       0 : =';'                 OPTDLM   EQU ';'  ; OPTIONS DELIMETER
(1)  143/       0 : =':'                 DRVDLM   EQU ':'  ; LOGICAL DRIVER DELIMETER
(1)  144/       0 : ='#'                 DEVDLM   EQU '#'  ; GENERIC DEVICE NAME DELIMETER
(1)  145/       0 : ='*'                 FAMDLM   EQU '*'  ; FAMILY NAME/SUFFIX DELIMETER
(1)  146/       0 :                     ;E$FATL   EQU 1!<7 ; FATAL ERROR BIT 
(1)  147/       0 :                     
(1)  148/       0 :                     ;
(1)  149/       0 :                     ; MDOS SECTOR Equates
(1)  150/       0 :                     ;
(1)  151/       0 : =$0                  SCsDID   EQU 0   ; DISK ID PHYSICAL SECTOR NUMBER
(1)  152/       0 : =$1                  SCsCAT   EQU 1   ; CLUSTER ALLOCATION TABLE PHSYICAL
(1)  153/       0 : =$2                  SCsLOK   EQU 2   ; LOCKOUT CLUSTER TABLE PHYSICAL SE
(1)  154/       0 : =$3                  SCsDIR   EQU 3   ; DIRECTORY START PHYSICAL SECTOR N
(1)  155/       0 : =$16                 SCsDRE   EQU $16 ; DIRECTORY END PHYSICAL SECTOR NUM
(1)  156/       0 : =$17                 SCsBB    EQU $17 ; BOOT BLOCK PHYSICAL SECTOR NUMBER
(1)  157/       0 : =$18                 SCsDOS   EQU $18 ; OPERATING SYSTEM PHSYICAL SECTOR
(1)  158/       0 : =$80                 SCsSIZ   EQU 128 ; SECTOR SIZE IN BYTES
(1)  159/       0 : =$1A                 SCsTRK   EQU 26  ; NUMBER OF SECTORS/TRACK (SINGLE S
(1)  160/       0 : =$34                 SCsTKD   EQU 52  ; NUMBER OF SECTORS/CYLINDER (DOUBL
(1)  161/       0 : =$4                  SCsCLS   EQU 4   ; NUMBER OF SECTORS / CLUSTER
(1)  162/       0 : =$7D0                SCsMAX EQU 2000 ; MAXIMUM NO. OF USABLE SECTORS (SI
(1)  163/       0 : =$FA4                SCsMXD EQU 4004 ; MAXIMUM NO. OF USABLE SECTORS <DO
(1)  164/       0 : =$20                 DFCLSs EQU 32   ; DEFAULT NO. OF CLUSTERS
(1)  165/       0 :                     
(1)  166/       0 :                     ;
(1)  167/       0 :                     ; DISK ID SECTOR OFFSETS
(1)  168/       0 :                     ;
(1)  169/       0 : =$0                  DIDsID  EQU  0   ; OFFSET TO DISK ID (8 BYTES)
(1)  170/       0 : =$8                  DIDsVN  EQU  8   ; OFFSET TO VERSION NUMBER (2 BYTES
(1)  171/       0 : =$A                  DIDsRN  EQU  10  ; OFFSET TO REVISION NUMBER (2 BYTE
(1)  172/       0 : =$C                  DIDsDT  EQU  12  ; OFFSET TO DATE (6 BYTES)
(1)  173/       0 : =$12                 DIDsNM  EQU  18  ; OFFSET TO USER NAME (20 BYTES)
(1)  174/       0 : =$26                 DIDsRB  EQU  38  ; OFFSET TO RIB ADDRS. (20 BYTES)
(1)  175/       0 :                     
(1)  176/       0 :                     ;
(1)  177/       0 :                     ; DIRECTORY ENTRY OFFSET
(1)  178/       0 :                     ;
(1)  179/       0 : =$0                  DIRsNM  EQU 0   ; OFFSET TO NAME (8 BYTES)
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm(mdoseq.inc) - Page 4 - 02/18/2026 05:54:45 PM


(1)  180/       0 : =$8                  DIRsSX  EQU 8   ; OFFSET TO SUFFIX (2 BYTES)
(1)  181/       0 : =$A                  DIRsRB  EQU 10  ; OFFSET TO RIB ADDRESS (2 BYTES)
(1)  182/       0 : =$C                  DIRsAT  EQU 12  ; OFFSET OF ATTRIBUTES (2 BYTES)
(1)  183/       0 : =$E                  DIRsNU  EQU 14  ; OFFSET TO NOT USED AREA (2 BYTES)
(1)  184/       0 :                     
(1)  185/       0 :                     ;
(1)  186/       0 :                     ; RIB BINARY FILE OFFSET
(1)  187/       0 :                     ;
(1)  188/       0 : =$75                 RIBsLB  EQU 117 ; NUMBER OF BYTES IN LAST SECTOR
(1)  189/       0 : =$76                 RIBsSL  EQU 118 ; NUMBER OF SECTORS TO LOAD
(1)  190/       0 : =$78                 RIBsLA  EQU 120 ; MEMORY LOAD ADDRESS
(1)  191/       0 : =$7A                 RIBsSA  EQU 122 ; START EXECUTION ADDRESS
(1)  192/       0 :                     
(1)  193/       0 :                     ;
(1)  194/       0 :                     ; UNIFIED I/O CONTROL BLOCK OFFSETS
(1)  195/       0 :                     ;
(1)  196/       0 : =$0                  IOCSTA  EQU 0  ; ERROR STATUS
(1)  197/       0 : =$1                  IOCDTT  EQU 1  ; DATA TRANSFER TYPE
(1)  198/       0 : =$2                  IOCDBP  EQU 2  ; DATA BUFFER POINTER
(1)  199/       0 : =$4                  IOCDBS  EQU 4  ; DATA BUFFER START ADDRESS
(1)  200/       0 : =$6                  JOCDBE  EQU 6  ; DATA BUFFER END ADDRESS
(1)  201/       0 : =$8                  IOCGDW  EQU 8  ; GENERIC DEVICE TYPE/CDB ADDRESS
(1)  202/       0 : =$A                  IOCLUN  EQU 10 ; LOGICAL UNIT NUMBER
(1)  203/       0 : =$B                  IOCNAM  EQU 11 ; FILE NAME
(1)  204/       0 : =$B                  IOCMLS  EQU 11 ; MAXIMUM REFERENCED LSN
(1)  205/       0 : =$D                  IOCSDW  EQU 13 ; CURRENT SEGMENT DESCRIPTOR WORD
(1)  206/       0 : =$F                  IOCSLS  EQU 15 ; 1ST LOGICAL SECTOR OF CURRENT SEG
(1)  207/       0 : =$11                 IOCLSN  EQU 17 ; CURRENT LOGICAL SECTOR NUMBER
(1)  208/       0 : =$13                 IOCSUF  EQU 19 ; FILE NAME SUFFIX
(1)  209/       0 : =$13                 IOCEOF  EQU 19 ; LOGICAL END OF FIl.E
(1)  210/       0 : =$15                 IOCRIB  EQU 21 ; PHYSICAL DISK ADDRESS OF R. I.B.
(1)  211/       0 : =$17                 IOCFDF  EQU 23 ; FILE DESCRIPTOR FLAGS
(1)  212/       0 : =$1B                 IOCDEN  EQU 27 ; DIRECTORY ENTRY NUMBER
(1)  213/       0 : =$1D                 IOCSBP  EQU 29 ; SECTOR BUFFER POINTER/INITIAL SIZ
(1)  214/       0 : =$1F                 IOCSBS  EQU 31 ; SECTOR BUFFER START ADDRESS
(1)  215/       0 : =$21                 IOCSBE  EQU 33 ; SECTOR BUFFER END ADDRESS
(1)  216/       0 : =$23                 IOCSBI  EQU 35 ; SECTOR BUFFER INTERNAL PTR
(1)  217/       0 : =$25                 IOCBLN  EQU IOCSBI+2-IOCSTA ; IOCB LENGTH            - 37
(1)  218/       0 :                     
(1)  219/       0 :                     ;
(1)  220/       0 :                     ; UNIFIED I/O ERROR STATUS
(1)  221/       0 :                     ;
(1)  222/       0 : =$0                  IsNOER  EQU  $0 ; NO ERRORS, NORMAL RETURN
(1)  223/       0 : =$1                  IsNODV  EQU  $1 ; NO SUCH DEVICE
(1)  224/       0 : =$2                  IsRES   EQU  $2 ; DEVICE RESERVED ALREADY
(1)  225/       0 : =$3                  IsNORV  EQU  $3 ; DEVICE NOT RESERVED
(1)  226/       0 : =$4                  IsNRDY  EQU  $4 ; DEVICE NOT READY
(1)  227/       0 : =$5                  IsIVDV  EQU  $5 ; INVALID DEVICE
(1)  228/       0 : =$6                  IsDUPE  EQU  $6 ; DUPLICATE FILE NAME
(1)  229/       0 : =$7                  IsNONM  EQU  $7 ; FILE NAME NOT FOUND
(1)  230/       0 : =$8                  IsCLOS  EQU  $8 ; INVALID OPEN/CLOSED FLAG
(1)  231/       0 : =$9                  IsEOF   EQU  $9 ; END OF FILE
(1)  232/       0 : =$A                  IsFTYP  EQU  $A ; INVALID FILE TYPE
(1)  233/       0 : =$B                  IsDTYP  EQU  $B ; INVALID DATA TRANSFER TVPE
(1)  234/       0 : =$C                  IsEOM   EQU  $C ; END OF MEDIA
(1)  235/       0 : =$D                  IsBUFQ  EQU  $D ; BUFFER OVERFLOW
(1)  236/       0 : =$E                  IsCKSM  EQU  $E ; CHECKSUM ERROR
(1)  237/       0 : =$F                  IsWRIT  EQU  $F ; FILE IS WRITE PROTECTED
(1)  238/       0 : =$10                 IsDELT  EQU $10 ; FILE IS DELETE PROTECTED
(1)  239/       0 : =$11                 IsRANG  EQU $11 ; LOQICAL SECTOR NUMBER OUT OF RANG
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm(mdoseq.inc) - Page 5 - 02/18/2026 05:54:45 PM


(1)  240/       0 : =$12                 IsFSPC  EQU $12 ; NO DISK FILE SPACE AVAILABLE
(1)  241/       0 : =$13                 IsDSPC  EQU $13 ; NO DIRECTORY SPACE AVAILABL.E
(1)  242/       0 : =$14                 IsSSPC  EQU $14 ; NO SEGMENT DESCRIPTOR SPACE AVAIL
(1)  243/       0 : =$15                 IsIDEN  EQU $15 ; INVALID DIR. ENTRY NO.
(1)  244/       0 : =$16                 IsRIB   EQU $16 ; INVALID RIB
(1)  245/       0 : =$17                 IsDEAL  EQU $17 ; CAN'T DEALLOCATE ALL SPACE
(1)  246/       0 : =$18                 IsRECL  EQU $18 ; BINARY RECORD LENGTH TOO LRGE
(1)  247/       0 : =$19                 IsSECB  EQU $19 ; SECTOR BUFFER SIZE ERROR
(1)  248/       0 :                     
(1)  249/       0 :                     ;
(1)  250/       0 :                     ; MDOS INTERNAL VARIABLE AND LOCATION EQUATES
(1)  251/       0 :                     ;
(1)  252/       0 : =$100                MDOSs   EQU $100  ; START OF MDOS ASECT
(1)  253/       0 : =$50                 CBUFLs  EQU  80   ; COMMAND BUFFER LENGTH
(1)  254/       0 : =$AE                 CBUFFs  EQU  MDOSs-CBUFLs-2 ; COMMAND BUFFER LOCATION     - $AE
(1)  255/       0 : =$FE                 CBUFPs  EQU  CBUFFs+CBUFLs  ; COMMAND BUFFER SCAN POINTER - $FE
(1)  256/       0 : =$100                VERSss  EQU  MDOSs    ; VERSION#                          - $100
(1)  257/       0 : =$102                REVSss  EQU  VERSss+2 ; REVISION#                         - $102
(1)  258/       0 : =$104                KYIsSV  EQU  REVSss+2 ; SAVE AREA FOR KEYINs VECTOR       - $104
(1)  259/       0 : =$106                ENDOSs  EQU  KYIsSV+2 ; END OF MDOS                       - $106
(1)  260/       0 : =$108                ENDUSs  EQU  ENDOSs+2 ; END OF USER PROGRAM AREA          - $108
(1)  261/       0 : =$10A                ENDSYs  EQU  ENDUSs+2 ; END OF SYSTEM (MDOS) RAM          - $10A
(1)  262/       0 : =$10E                RIBBAs  EQU  ENDSYs+4 ; RIB BUFFER ADDRESS                - $10E
(1)  263/       0 : =$110                ENDRVs  EQU  RIBBAs+2 ; END OF MDOS ROM VARIABLES         - $110
(1)  264/       0 : =$112                GDBAs   EQU  ENDRVs+2 ; GENERIC DEVICE TABLE ADDRESS      - $112
(1)  265/       0 : =$114                SYERRs  EQU GDBAs+2  ; SYSTEM ERROR STATUS WORD           - $114
(1)  266/       0 : =$116                SWIsSV  EQU SYERRs+2 ; SWI VECTOR SAVE AREA               - $116
(1)  267/       0 : =$118                SWIsUV  EQU SWIsSV+2 ; SWI USER VECTOR                    - $118
(1)  268/       0 : =$11A                IRGsUV  EQU SWIsUV+2 ; IRG USER VECTOR                    - $11A
(1)  269/       0 : =$11C                IRGsSV  EQU IRGsUV+2 ; IRG VECTOR SAVE AREA               - $11C
(1)  270/       0 : =$11E                CHFLGs  EQU IRGsSV+2 ; CHAIN FUNCTION FLAG WORD           - $11E
(1)  271/       0 : =$120                SYIOCB  EQU CHFLGs+2 ; SYSTEM CONSOLE IOCB                - $120
(1)  272/       0 : =$145                SYPOCB  EQU SYIOCB+IOCBLN ; SYSTEM PRINTER IOCB           - $145
(1)  273/       0 : =$16A                SYEOCB  EQU SYPOCB+IOCBLN ; ERR MSG FILE                  - $16A
(1)  274/       0 :                     
(1)  275/       0 :                     ;
(1)  276/       0 :                     ; LOGICAL UNIT NUMBER - BIT DEF
(1)  277/       0 :                     ;
(1)  278/       0 : =$40                 LUsRES EQU %01000000 ; IOCB RESERVED FLAG
(1)  279/       0 :                     
(1)  280/       0 :                     ;
(1)  281/       0 :                     ; IOCDTT BIT DEFINITIONS
(1)  282/       0 :                     ;
(1)  283/       0 : =$0                  DTsOPP EQU %00000000 ; OPEN UPDATE/INPUT
(1)  284/       0 : =$1                  DTsOPI EQU %00000001 ; OPEN INPUT MODE
(1)  285/       0 : =$2                  DTsOPO EQU %00000010 ; OPEN OUTPUT MODE
(1)  286/       0 : =$3                  DTsOPU EQU %00000011 ; OPEN UPDATE MODE
(1)  287/       0 : =$4                  DTsNFF EQU %00000100 ; NON-FILE FORMAT I/O FLAG
(1)  288/       0 : =$8                  DTsTRU EQU %00001000 ; TRUNCATE FLAG
(1)  289/       0 : =$10                 DTsCLS EQU %00010000 ; FILE OPEN/CLOSE FLAG
(1)  290/       0 : =$20                 DTsSIO EQU %00100000 ; SECTOR I/O FLAG
(1)  291/       0 : =$40                 DTsOUT EQU %01000000 ; OUTPUT TRANSFER TYPE
(1)  292/       0 : =$80                 DTsINP EQU %10000000 ; INPUT TRANSFER TYPE
(1)  293/       0 :                     
(1)  294/       0 :                     ;
(1)  295/       0 :                     ; IOCFDF BIT DEFINITIONS
(1)  296/       0 :                     ;
(1)  297/       0 : =$0                  FDsFMU EQU %00000000 ; USER DEFINED FORMAT (SECTOR I/O)
(1)  298/       0 : =$1                  FDsFMD EQU %00000001 ; DEFAULT OBJECT REC'D FORMAT
(1)  299/       0 : =$2                  FDsFML EQU %00000010 ; BINARY LOAD FORMAT
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm(mdoseq.inc) - Page 6 - 02/18/2026 05:54:45 PM


(1)  300/       0 : =$3                  FDsFMB EQU %00000011 ; BINARY RECORD FORMAT
(1)  301/       0 : =$5                  FDsFMA EQU %00000101 ; ASCII RECORD FORMAT
(1)  302/       0 : =$7                  FDsFMC EQU %00000111 ; ASCI-CONVERTED-BINARY REC'O FORM
(1)  303/       0 : =$8                  FDsCMP EQU %00001000 ; SPACE COMPRESSION FLAG
(1)  304/       0 : =$10                 FDsCON EQU %00010000 ; CONTIGUOUS ALLOCATION FLAG
(1)  305/       0 : =$20                 FDsSYS EQU %00100000 ; SYSTEM FILE ATTRIBUTE
(1)  306/       0 : =$40                 FDsDEL EQU %01000000 ; DELETE PROTECTION ATTRIBUTE
(1)  307/       0 : =$80                 FDsWRT EQU %10000000 ; WRITE PROTECTION ATTRIBUTE
(1)  308/       0 :                     
(1)  309/       0 :                     ;
(1)  310/       0 :                     ; UNIFIED I/O CONTROL DESCRIPTION BLOCK OFFSETS
(1)  311/       0 :                     ;
(1)  312/       0 : =$0                  CDBIOC EQU  0 ; ADDRESS OF IOCB
(1)  313/       0 : =$2                  CDBSDA EQU  2 ; SOFTWARE DRIVER ADDRESS
(1)  314/       0 : =$4                  CDBHAD EQU  4 ; HARDWARE ADDRESS
(1)  315/       0 : =$6                  CDBDDF EQU  6 ; DEVICE DESCRIPTOR FLAGS
(1)  316/       0 : =$7                  CDBVDT EQU  7 ; VALID DATA TYPE
(1)  317/       0 : =$8                  CDBDDA EQU  8 ; DEVICE DEPENDENT AREA
(1)  318/       0 : =$A                  CDBWST EQU 10 ; WORKING STORAGE
(1)  319/       0 : =$C                  CDBLEN EQU CDBWST+2 ; CDB LENGTH
(1)  320/       0 :                     
(1)  321/       0 :                     ;
(1)  322/       0 :                     ; CDBDDF BIT DEFINITIONS
(1)  323/       0 :                     ;
(1)  324/       0 : =$1                  DDsFMC EQU $00000001 ; ASCII-CONVERTED-BINARY IS DEFAUL
(1)  325/       0 : =$2                  DDsLOG EQU %00000010 ; LOGICAL SECTOR I/O FLAG
(1)  326/       0 : =$4                  DDsCNS EQU %00000100 ; CONSOLE FLAG
(1)  327/       0 : =$8                  DDsRWD EQU %00001000 ; REWIND FLAG
(1)  328/       0 : =$10                 DDsOCF EQU %00010000 ; OPEN/CLOSE FLAG
(1)  329/       0 : =$20                 DDsINP EQU %00100000 ; INPUT DEVICE FLAG
(1)  330/       0 : =$40                 DDsOUT EQU %01000000 ; OUTPUT DEVICE FLAG
(1)  331/       0 : =$80                 DDsRES EQU %10000000 ; RESERVABLE DEVICE FLAG
(1)  332/       0 :                     
(1)  333/       0 :                     ;
(1)  334/       0 :                     ; CDBVDT BIT DEFINITIONS
(1)  335/       0 :                     ;
(1)  336/       0 : =$4                  VDsBIN EQU %00000100 ; BINARY OBJECT FLAG
(1)  337/       0 : =$8                  VDsGDB EQU %00001000 ; TEMP GDB POINTER FLAG
(1)  338/       0 : =$10                 VDsSDA EQU %00010000 ; TEMP SDA POINTER FLAG
(1)  339/       0 : =$80                 VDsNFF EQU %10000000 ; NON-FILE FORMAT FLAG
(1)  340/       0 :                     
(1)  341/       0 :                     ;
(1)  342/       0 :                     ; DEVICE DRIVER ENTRY OFFSET
(1)  343/       0 :                     ;
(1)  344/       0 : =$0                  DVsON   EQU 0   ; DEVICE ON OFFSET
(1)  345/       0 : =$3                  DVsOFF  EQU 3   ; DEVICE OFF OFFSET
(1)  346/       0 : =$6                  DVsINT  EQU 6   ; DEVICE INTIALIZATION OFFSET
(1)  347/       0 : =$9                  DVsTRM  EQU 9   ; DEVICE TERMINATION OFFSET
(1)  348/       0 : =$C                  DVsIO   EQU 12  ; DEVICE CHARACTER INPUT/OUTPUT OFF
(1)  349/       0 :                     
(1)  350/       0 :                     ;
(1)  351/       0 :                     ; DISK EROM EQUATES
(1)  352/       0 :                     ;
(1)  353/       0 : =$0                  CURDRV  EQU  0 ; CURRENT DRIVE NUMBER
(1)  354/       0 : =$1                  STRSCT  EQU  1 ; STARTING PHYSICAL SECTOR NUMBER
(1)  355/       0 : =$3                  NUMSCT  EQU  3 ; NUMBER OF SECTORS TO OPERATE UPON
(1)  356/       0 : =$5                  LSCTLN  EQU  5 ; # OF BYTES TO READ FROM LAST SECT
(1)  357/       0 : =$6                  CURADR  EQU  6 ; MEMORY ADDRESS FOR DISK TRANSFER
(1)  358/       0 : =$8                  FDSTAT  EQU  8 ; DISK TRANSFER STATUS
(1)  359/       0 : =$B                  SCTCNT  EQU 11 ; SECTOR COUNT USED IN DETERMINING
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm(mdoseq.inc) - Page 7 - 02/18/2026 05:54:45 PM


(1)  360/       0 : =$D                  SIDES   EQU $D ; - ->SINGLEi + -> DOUBLE SIDED
(1)  361/       0 :                     
(1)  362/       0 :                     ;
(1)  363/       0 :                     ; EROM ENTRY POINTS
(1)  364/       0 :                     ;
(1)  365/       0 : =$E800               DSLOAD  EQU  $E800 ; BOOTSTRAP THE OPERATING SYSTEM
(1)  366/       0 : =$E822               FDINIT  EQU  $E822 ; INITIALIZE THE DISK'S PIA AND SSD
(1)  367/       0 : =$E853               CHKERR  EQU  $E853 ; CHECK AND PRINT ERROR FROM FDSTAT
(1)  368/       0 : =$E85A               PRNTER  EQU  $E85A ; PRINT ERROR FROM FDSTAT
(1)  369/       0 : =$E869               READSC  EQU  $E869 ; READ SECTOR(S)
(1)  370/       0 : =$E86D               READPS  EQU  $E86D ; READ PARTIAL SECTOR
(1)  371/       0 : =$E86F               RDCRC   EQU  $E86F ; READ AND CHECK FOR CRC
(1)  372/       0 : =$E872               RWTEST  EQU  $E872 ; WRITE/READ TEST
(1)  373/       0 : =$E875               RESTOR  EQU  $E875 ; MOVE HEAD TO TRACK 0
(1)  374/       0 : =$E878               SEEK    EQU  $E878 ; POSITION HEAD TO TRACK OF "STRSCT
(1)  375/       0 : =$E87B               WRTEST  EQU  $E87B ; WRITE TEST
(1)  376/       0 : =$E87E               WRDDAM  EQU  $E87E ; WRITE DELETED DATA MARK
(1)  377/       0 : =$E881               WRVERF  EQU  $E881 ; WRITE AND VERIFY CRC
(1)  378/       0 : =$E884               WRITSC  EQU  $E884 ; WRITE SECTDR(S)
(1)  379/       0 :                     
(1)  380/       0 :                     ;
(1)  381/       0 :                     ; EROM ERROR EQUATES
(1)  382/       0 :                     ;
(1)  383/       0 : ='1'                 ERsCRC  EQU  '1' ; DATA CRC ERROR
(1)  384/       0 : ='2'                 ERsWRT  EQU  '2' ; WRITE PROTECTED DISK
(1)  385/       0 : ='3'                 ERsRDY  EQU  '3' ; DISK NOT READY
(1)  386/       0 : ='4'                 ERsMRK  EQU  '4' ; DELETED DATA MARK ENCOUNTERED
(1)  387/       0 : ='5'                 ERsTIM  EQU  '5' ; TIMEOUT
(1)  388/       0 : ='6'                 ERsDAD  EQU  '6' ; INVALID DISK ADDRESS
(1)  389/       0 : ='7'                 ERsSEK  EQU  '7' ; SEEK ERROR
(1)  390/       0 : ='8'                 ERsDMA  EQU  '8' ; DATA ADDRESS MARK ERROR
(1)  391/       0 : ='9'                 ERsACR  EQU  '9' ; ADDRESS MARK CRC ERROR
(1)  392/       0 :                     
(1)  393/       0 :                     ;
(1)  394/       0 :                     ; MISCELLANEOUS EROM EQUATES
(1)  395/       0 :                     ;
(1)  396/       0 : =$5                  RETRYs  EQU  5   ; RETRY COUNT FOR DISK READ/WRITE E
(1)  397/       0 :                     
(1)  398/       0 :                     ;
(1)  399/       0 :                     ; LINE PRINTER EQUATES
(1)  400/       0 :                     ;
(1)  401/       0 : =$EBC0               LPINIT  EQU $EBC0 ; INIT PRINTER PIA
(1)  402/       0 : =$EBCC               LIST    EQU $EBCC ; PRINT CONTENTS OF 'A'
(1)  403/       0 : =$EBE4               LDATA   EQU $EBE4 ; PRINT STRING. CR/LF
(1)  404/       0 : =$EBF2               LDATA1  EQU $EBF2 ; PRINT STRING, NO CR/LF
(1)  405/       0 :                     
(1)  406/       0 :                     ;
(1)  407/       0 :                     ; EXBUG EQUATES FOR MDOS
(1)  408/       0 :                     ;
(1)  409/       0 :                     
(1)  410/       0 : =$F015               INCHNP EQU  $F015  ; INPUT CHARACTER (NO PARITY)
(1)  411/       0 : =$F018               OUTCH  EQU  $F018  ; OUTPUT ONE CHARACTER
(1)  412/       0 : =$F021               PCRLF  EQU  $F021  ; PRINT LF/CR
(1)  413/       0 : =$F024               PDATA  EQU  $F024  ; PRINT STRING
(1)  414/       0 : =$FCFD               SBITs  EQU  $FCFD  ; BIT 7 INDICATES IRG OCCURRED (IF
(1)  415/       0 : =$FF1F               BRKPTs EQU  $FF1F  ; MAID'S BREAKPOINT TABLE <8 FDB'S)
(1)  416/       0 : =$FF4F               BKPINs EQU  $FF4F  ; EXBUG BREAKPOINTS IN MEMORY
(1)  417/       0 : =$FF53               AECHO  EQU  $FF53  ; INPUT CHARACTER ECHO FLAG (O=>ECH
(1)  418/       0 : =$FFF8               IRGsVC EQU  $FFF8  ; IRG VECTOR
(1)  419/       0 : =$FFFA               SWIsVC EQU  $FFFA  ; SWI VECTOR
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm(mdoseq.inc) - Page 8 - 02/18/2026 05:54:45 PM


(1)  420/       0 : =$FFFC               NMIsVC EQU  $FFFC  ; NMI VECTOR
(1)  421/       0 : =$FF8A               XSTAKs EQU  $FF8A  ; EXBUG STACK
(1)  422/       0 : =$F0F3               MAIDs  EQU  $F0F3  ; MAID ENTRY POINT
(1)  423/       0 : =$FF16               XREGsP EQU  $FF16  ; MAID P-REG.
(1)  424/       0 : =$FF18               XREGsX EQU  $FF18  ; MAID X-REG.
(1)  425/       0 : =$FF1A               XREGsA EQU  $FF1A  ; MAID A-REG.
(1)  426/       0 : =$FF1B               XREGsB EQU  $FF1B  ; MAID B-REG.
(1)  427/       0 : =$FF1C               XREGsC EQU  $FF1C  ; MAID C-REG.
(1)  428/       0 : =$FF1D               XREGsS EQU  $FF1D  ; MAID S-REG.
(1)  429/       0 : =$FF63               BRKPEs EQU  $FF63  ; END OF MAID BREAKPOINT TABLE
(1)  430/       0 : =$FCF4               CNACIs EQU  $FCF4  ; CONSOLE ACIA
(1)  431/       0 :                     
(1)  432/       0 :                     
(1)  433/       0 :                     
(1)  434/       0 :                     
(1)  435/       0 :                     
(1)  436/       0 :                     
(1)  437/       0 :                     
(1)  438/       0 :                     
(1)  439/       0 :                     
(1)  440/       0 :                     
(1)  441/       0 :                     
(1)  442/       0 :                     
(1)  443/       0 :                     
(1)  444/       0 :                     
(1)  445/       0 :                     
(1)  446/       0 :                     
(1)  447/       0 :                     
(1)  448/       0 :                     
(1)  449/       0 :                     
(1)  450/       0 :                     
(1)  451/       0 :                     
(1)  452/       0 :                     
       2/       0 :                     
       3/       0 :                     ;****************************************************
       4/       0 :                     ; Used Labels
       5/       0 :                     ;****************************************************
       6/       0 :                     
       7/       0 : =$1                  STRSCTH EQU     $0001 ; 
       8/       0 : =$2                  STRSCTL EQU     $0002 ; 
       9/       0 : =$3                  NUMSCTH EQU     $0003 ; |
      10/       0 : =$4                  NUMSCTL EQU     $0004 ; contains 26 or 52 according to SS or DS
      11/       0 : =$6                  CURADRH EQU     $0006 ; getes init. w. Address $2004 ($E5E5 gets written to disk)
      12/       0 : =$B                  SECTCNT EQU     $000B ; 
      13/       0 : =$C                  M000C   EQU     $000C ; 
      14/       0 : =$1A                 M001A   EQU     $001A ; 
      15/       0 : =$20                 LDADDRH EQU     $0020 ; |
      16/       0 : =$21                 LDADDRL EQU     $0021 ; cont. 76 (max. Track# ?)
      17/       0 : =$22                 TRKNOW  EQU     $0022 ; 
      18/       0 : =$23                 SECNUM  EQU     $0023 ; 
      19/       0 : =$24                 M0024   EQU     $0024 ; 
      20/       0 : =$25                 NMISAV  EQU     $0025 ; Save old NMI Vector
      21/       0 : =$27                 STACKSAV EQU     $0027 ; 
      22/       0 : =$29                 CLKF1   EQU     $0029 ; CPU Frequency is calculated with rpm of disk (3 for 1MHz)
      23/       0 : =$2A                 CLKF2   EQU     $002A ; This is half of the above value (1 for 1MHz)
      24/       0 : =$2B                 STATS2  EQU     $002B ; Save of the Status Reg.
      25/       0 : =$2C                 EXDSKSD EQU     $002C ; checks PA5 from the disk controller (SS or DS Variant)
      26/       0 :                     
      27/       0 : =$2D                 M002D   EQU     $002D
      28/       0 : =$2E                 M002E   EQU     $002E
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 9 - 02/18/2026 05:54:45 PM


      29/       0 : =$30                 M0030   EQU     $0030
      30/       0 : =$34                 M0034   EQU     $0034
      31/       0 : =$4C                 M004C   EQU     $004C
      32/       0 : =$FE                 M00FE   EQU     $00FE
      33/       0 : =$1BD                M01BD   EQU     $01BD
      34/       0 : =$EBFE               MEBFE   EQU     $EBFE
      35/       0 : =$EBFF               MEBFF   EQU     $EBFF
      36/       0 : =$EC00               PIAREGA EQU     $EC00
      37/       0 : =$EC01               PIAREGB EQU     $EC01
      38/       0 : =$EC02               PIACTRLA EQU    $EC02
      39/       0 : =$EC03               PIACTRLB EQU    $EC03
      40/       0 : =$EC04               SSDA_0  EQU     $EC04
      41/       0 : =$EC05               SSDA_1  EQU     $EC05
      42/       0 : =$F018               XOUTCH  EQU     $F018
      43/       0 : =$FFCC               MFFCC   EQU     $FFCC
      44/       0 : =$FFE6               MFFE6   EQU     $FFE6
      45/       0 :                     
      46/       0 :                     ;****************************************************
      47/       0 :                     ; Program's Code Areas
      48/       0 :                     ;****************************************************
      49/       0 :                     
      50/       0 :                     
      51/    2000 :                                     ORG     $2000
      52/    2000 :                     
      53/    2000 :                     ; This Version is pretty much the same as 300.
      54/    2000 :                     ; There are some patches from $2350
      55/    2000 :                     
      56/    2000 : 20 33 30 33         M2000           FCC     ' 303'                   ; 2000: 20 33 30 33 ; Version 
      57/    2004 : E5 E5               M2004           FDB     $E5E5                    ; 2004: E5 E5       ; Data written to disk 
      58/    2006 : 9F 27               FORMATSTART     STS     STACKSAV                 ; 2006: 9F 27       ;  
      59/    2008 : B6 EB FF                            LDAA    MEBFF                    ; 2008: B6 EB FF    ; Get some kind of Disk EPROM Version 
      60/    200B : 81 45                               CMPA    #$45                     ; 200B: 81 45       ; is it $45 
      61/    200D : 26 0E                               BNE     Z201D                    ; 200D: 26 0E       ;  
      62/    200F : C6 0A                               LDAB    #$0A                     ; 200F: C6 0A       ; yes, print error "INVALID DEVICE" 
      63/    2011 : (MACRO)              Z2011           SCALL   MDERR1                   ; 2011: 3F          ;  
      63/    2011 : 3F                           SWI
      63/    2012 : 20                           FCB  MDERR1
      64/    2013 : (MACRO)                              SCALL   MDENT1                   ; 2012: 20          ; bail 
      64/    2013 : 3F                           SWI
      64/    2014 : 1A                           FCB  MDENT1
      65/    2015 : C6 0B               SERRB           LDAB    #$0B                     ; 2015: C6 0B       ; 
      66/    2017 : 20 F8                               BRA     Z2011                    ; 2017: 20 F8       ; 
      67/    2019 :                     ;------------------------------------------------
      68/    2019 : C6 04               Z2019           LDAB    #$04                     ; print error "INVALID LOGICAL UNIT NUMBER"
      69/    201B : 20 F4                               BRA     Z2011                    ; 
      70/    201D :                     ;------------------------------------------------
      71/    201D : 5F                  Z201D           CLRB                             ; EBFF is not $45
      72/    201E : 81 43                               CMPA    #$43                     ; is it $43
      73/    2020 : 27 02                               BEQ     Z2024                    ; 
      74/    2022 : C6 10                               LDAB    #$10                     ; 
      75/    2024 : D7 24               Z2024           STAB    M0024                    ; 
      76/    2026 : 86 31                               LDAA    #$31                     ; LUN
      77/    2028 : B7 23 2F                            STAA    M232F                    ; store logical unit # to filename area
      78/    202B : DE FE                               LDX     M00FE                    ; 
      79/    202D : FF 23 3A                            STX     M233A                    ; Address of Input Buffer
      80/    2030 : CE 23 2F                            LDX     #M232F                   ; 
      81/    2033 : FF 23 3C                            STX     M233C                    ; Address of Standard Filename area (11bytes)
      82/    2036 : CE 23 3A                            LDX     #M233A                   ; X: The address of a file name packet
      83/    2039 : (MACRO)                              SCALL   PFNAM1                   ; PROCESS FILE NAME
      83/    2039 : 3F                           SWI
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 10 - 02/18/2026 05:54:45 PM


      83/    203A : 1D                           FCB  PFNAM1
      84/    203B : 86 20                               LDAA    #$20                     ; 
      85/    203D : B1 23 30                            CMPA    M2330                    ; check first Byte for $20 (SPACE)
      86/    2040 : 26 D3                               BNE     SERRB                    ; Set Error index to $B (COMMAND SYNTAX ERROR)
      87/    2042 : B1 23 38                            CMPA    M2338                    ; check last Byte for $20 (SPACE)
      88/    2045 : 26 CE                               BNE     SERRB                    ; Set Error index to $B (COMMAND SYNTAX ERROR)
      89/    2047 : F6 23 2F                            LDAB    M232F                    ; Check LUN
      90/    204A : C1 30                               CMPB    #$30                     ; 
      91/    204C : 2F CB                               BLE     Z2019                    ; below or equal $30 - Error 4
      92/    204E : C1 33                               CMPB    #$33                     ; 
      93/    2050 : 2E C7                               BGT     Z2019                    ; above $33 - Error 4
      94/    2052 : F7 23 4B                            STAB    DRVNUM                   ; store drive #
      95/    2055 : CE 23 3E                            LDX     #M233E                   ; |
      96/    2058 : (MACRO)                              SCALL   DSPLY1                   ; Output Question "Format Drive X?"
      96/    2058 : 3F                           SWI
      96/    2059 : 0A                           FCB  DSPLY1
      97/    205A : CE 23 4E                            LDX     #STORAGE                 ; Set up input buffer
      98/    205D : C6 01                               LDAB    #$01                     ; expect one character
      99/    205F : (MACRO)                              SCALL   KEYIN1                   ; Get it
      99/    205F : 3F                           SWI
      99/    2060 : 09                           FCB  KEYIN1
     100/    2061 : B6 23 4E                            LDAA    STORAGE                  ; 
     101/    2064 : 81 59                               CMPA    #'Y'                     ;
     102/    2066 : 27 02                               BEQ     Z206A                    ; is it Y ? 
     103/    2068 : (MACRO)                              SCALL   MDENT1                   ; No, bail
     103/    2068 : 3F                           SWI
     103/    2069 : 1A                           FCB  MDENT1
     104/    206A : F6 23 4B            Z206A           LDAB    DRVNUM                   ; get drive # ($31 for drv. 1)
     105/    206D : C4 0F                               ANDB    #$0F                     ; convert from ASCII to number
     106/    206F : D7 00                               STAB    CURDRV                   ; store drive # for floppy controller
     107/    2071 : CE 00 4C                            LDX     #$004C                   ; 
     108/    2074 : DF 20                               STX     LDADDRH                  ; $4C = 76 (Tracks?)
     109/    2076 : CE 20 06                            LDX     #$2006                   ; 
     110/    2079 : DF 2E                               STX     M002E                    ; second part of Error Packet (pg. 380 of MDOS User Guide Jun79)
     111/    207B : CE 20 04                            LDX     #$2004                   ; 
     112/    207E : DF 06                               STX     CURADRH                  ; Which data to write to disk
     113/    2080 : BD E8 22                            JSR     FDINIT    ;EXORDISK      ; the version i have only inits DS0,1 to high and ignores DS2,3
     114/    2083 :                     ;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
     115/    2083 :                     ; This is an enlightnig piece of code. It shows how the EXORDISK 3 PIA is connected
     116/    2083 :                     ; to the Diskdrives. We have four Outputs. One (PB6) is identified as SIDE Output, 
     117/    2083 :                     ; PA0, PA1 and PB5 as driveselect. Lets assume PA0 is for DS0 (not inverted). From
     118/    2083 :                     ; here we can see that:
     119/    2083 :                     ;             PA0 PA1 PB5
     120/    2083 :                     ;             DS0 DS1 DS2
     121/    2083 :                     ; DRVNUM = 1  hi  low hi
     122/    2083 :                     ; DRVNUM = 2  low hi  low
     123/    2083 :                     ; DRVNUM = 3  hi  low low
     124/    2083 :                     ;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
     125/    2083 :                      
     126/    2083 : 96 00                               LDAA    CURDRV                   ; can be 1-3 (0 is not allowed!)
     127/    2085 : C6 66                               LDAB    #$66                     ; Bit 1,2,5,6 - WG, READ, DS3(SIDE) high, DS2 high
     128/    2087 : 44                                  LSRA                             ; check Bit 1, is it drive 2 or 3 ?
     129/    2088 : 27 02                               BEQ     Z208C                    ; zero, must be DRV1 (0 is not allowed!)
     130/    208A : C6 46                               LDAB    #$46                     ; otherwise it must be DRV 2 or 3, Bit 1,2,6 - WG, READ, DS3(SIDE) high, DS2 low
     131/    208C : F7 EC 01            Z208C           STAB    PIAREGB                  ; ******************* PROBLEM: DS3(SIDE) is never on! - Because it is NOT DS3 but SIDE
     132/    208F : C6 02                               LDAB    #$02                     ; Bit 1 - DS1
     133/    2091 : 24 01                               BCC     Z2094                    ; carry clr = Drv. 2 (0 is not allowed!)
     134/    2093 : 54                                  LSRB                             ; 2>>1 = 1, DS0 high (DS1 active)
     135/    2094 : BD 23 50            Z2094           JSR     Z2350     ; 2094: BD 23 50  ; Different to v300!
     136/    2097 :                     ;Z2094           STAB    PIAREGA                  ; or DS1 high, DS0 active, ****** PROBLEM: DS1 + DS2 is on!
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 11 - 02/18/2026 05:54:45 PM


     137/    2097 : 7D 00 24                            TST     M0024                    ; init. with $10
     138/    209A : 26 0B                               BNE     Z20A7                    ; 
     139/    209C : B6 EB FE                            LDAA    MEBFE                    ; Get some kind of Disk EPROM Version
     140/    209F : 81 11                               CMPA    #$11                     ; 
     141/    20A1 : 27 04                               BEQ     Z20A7                    ; Version 11 ignores RDY
     142/    20A3 : 81 12                               CMPA    #$12                     ; Version 12 ignores RDY too
     143/    20A5 : 26 04                               BNE     CHKRDY                   ; all other Versions use RDY Signal
     144/    20A7 : 86 FF               Z20A7           LDAA    #$FF                     ; 
     145/    20A9 : 20 05                               BRA     Z20B0                    ; 
     146/    20AB :                     ;------------------------------------------------
     147/    20AB : B6 EC 00            CHKRDY          LDAA    PIAREGA                  ; 
     148/    20AE : 48                                  ASLA                             ; |
     149/    20AF : 48                                  ASLA                             ; shift PA6 (RDY) into carry, PA5 into Bit 7
     150/    20B0 : 97 2C               Z20B0           STAA    EXDSKSD                  ; |
     151/    20B2 : 24 06                               BCC     Z20BA                    ; no problem if RDY is low
     152/    20B4 : 86 33                               LDAA    #$33                     ; Error '3' (DISK NOT READY)
     153/    20B6 : 97 08                               STAA    FDSTAT                   ; 
     154/    20B8 : 20 50                               BRA     Z210A                    ; Jump to show Error Msg.
     155/    20BA :                     ;------------------------------------------------
     156/    20BA : CE 00 1A            Z20BA           LDX     #$001A                   ; $1a = 26
     157/    20BD : 96 2C                               LDAA    EXDSKSD                  ; |
     158/    20BF : 2B 03                               BMI     Z20C4                    ; Bit 7 is now PA5, if PA5 is high -> Single Sided
     159/    20C1 : CE 00 34                            LDX     #$0034                   ; $34 = 52
     160/    20C4 : DF 03               Z20C4           STX     NUMSCTH                  ; 26 for SS and 52 for DS
     161/    20C6 :                     ;------------------------------------------------
     162/    20C6 :                     ; From here it is the same code as CLKDMD in the
     163/    20C6 :                     ; EXORDISK ROM $EB85
     164/    20C6 :                     ;------------------------------------------------
     165/    20C6 : BD 22 B0                            JSR     SETUPNMI                 ; X is on PIAREGA now
     166/    20C9 : E6 01                               LDAB    $01,X                    ; Load PIAREGB (CLR Interrupt Flag)
     167/    20CB : 4F                                  CLRA                             ; 
     168/    20CC : E6 03               Z20CC           LDAB    $03,X                    ; Load PIACTRLB
     169/    20CE : 2A FC                               BPL     Z20CC                    ; Wait for IRQB on CB1 (IDX)
     170/    20D0 : E6 01                               LDAB    $01,X                    ; Load PIAREGB (CLR Interrupt Flag)
     171/    20D2 : 5F                  Z20D2           CLRB                             ; 
     172/    20D3 : 5A                  Z20D3           DECB                             ; |
     173/    20D4 : 26 FD                               BNE     Z20D3                    ; wait
     174/    20D6 : 4C                                  INCA                             ; A was 0, is now 1
     175/    20D7 : 6D 03                               TST     $03,X                    ; Test PIACTRLB
     176/    20D9 : 2A F7                               BPL     Z20D2                    ; Wait for IRQB on CB1 (IDX) 166ms later
     177/    20DB : 5C                                  INCB                             ; 
     178/    20DC : 80 4B                               SUBA    #$4B                     ; 
     179/    20DE : 5C                  Z20DE           INCB                             ; 
     180/    20DF : 80 16                               SUBA    #$16                     ; 
     181/    20E1 : 24 FB                               BCC     Z20DE                    ; 
     182/    20E3 : D7 29                               STAB    CLKF1                    ; 
     183/    20E5 :                     ;------------------------------------------------
     184/    20E5 : 54                                  LSRB                             ; 
     185/    20E6 : D7 2A                               STAB    CLKF2                    ; 
     186/    20E8 : 86 03                               LDAA    #$03                     ; 
     187/    20EA : A7 01                               STAA    $01,X                    ; 3 -> PIAREGB (WG high, RESET inactive)
     188/    20EC : BD 22 D0                            JSR     Z22D0                    ; Init PIA
     189/    20EF : BD E8 75                            JSR     RESTOR   ;EXORDISK       ; Set up drive
     190/    20F2 : 24 23                               BCC     Z2117                    ; no error
     191/    20F4 : D6 01               Z20F4           LDAB    STRSCTH                  ; 
     192/    20F6 : 96 02                               LDAA    STRSCTL                  ; 
     193/    20F8 : 9B 04                               ADDA    NUMSCTL                  ; |
     194/    20FA : D9 03                               ADCB    NUMSCTH                  ; contains 26 or 52 according to SS or DS
     195/    20FC : 90 0C                               SUBA    M000C                    ; 
     196/    20FE : D2 0B                               SBCB    SECTCNT                  ; 
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 12 - 02/18/2026 05:54:45 PM


     197/    2100 : 80 01                               SUBA    #$01                     ; 
     198/    2102 : C2 00                               SBCB    #$00                     ; 
     199/    2104 : 97 02               Z2104           STAA    STRSCTL                  ; 
     200/    2106 : D7 01                               STAB    STRSCTH                  ; 
     201/    2108 : 96 08                               LDAA    FDSTAT                   ; 
     202/    210A : 97 2D               Z210A           STAA    M002D                    ; first part of Error Packet (pg. 380 of MDOS User Guide Jun79)
     203/    210C : C6 01               Z210C           LDAB    #$01                     ; Error: "**PROM I/O ERROR -- STATUS = \3 AT h DRIVE i - PSN j"
     204/    210E : CE 00 2D                            LDX     #M002D                   ; set pointer to Error Packet
     205/    2111 : (MACRO)                              SCALL   MDERR1                   ; bail
     205/    2111 : 3F                           SWI
     205/    2112 : 20                           FCB  MDERR1
     206/    2113 : 25 F7                               BCS     Z210C                    ; 
     207/    2115 : (MACRO)                              SCALL   MDENT1                   ; bail
     207/    2115 : 3F                           SWI
     207/    2116 : 1A                           FCB  MDENT1
     208/    2117 : 96 29               Z2117           LDAA    CLKF1                    ; is 3 for 1MHz
     209/    2119 : 80 04                               SUBA    #$04                     ; 
     210/    211B : 25 15                               BCS     Z2132                    ; carry is set on a 1MHz Machine
     211/    211D : 80 03                               SUBA    #$03                     ; 
     212/    211F : 24 05                               BCC     Z2126                    ; carry is clear on a 2MHz machine ??
     213/    2121 : CE 20 00                            LDX     #$2000                   ; 
     214/    2124 : 20 09                               BRA     Z212F                    ; otherwise it is a 1.5MHz machine
     215/    2126 :                     ;------------------------------------------------
     216/    2126 : CE 22 AB            Z2126           LDX     #$22AB                   ; |
     217/    2129 : FF 21 F0                            STX     M21F0                    ; | Patch it according to CPU freq.
     218/    212C : CE 01 BD                            LDX     #$01BD                   ; |
     219/    212F : FF 21 EE            Z212F           STX     M21EE                    ; |
     220/    2132 : 96 20               Z2132           LDAA    LDADDRH                  ; High Byte is zero
     221/    2134 : 97 22                               STAA    TRKNOW                   ; 
     222/    2136 : CE FF E6                            LDX     #MFFE6                   ; $10000-$FFE6 = 26
     223/    2139 : 7D 00 2C                            TST     EXDSKSD                  ; Bit 7 is now PA5
     224/    213C : 2B 03                               BMI     Z2141                    ; check for SS or DS
     225/    213E : CE FF CC                            LDX     #MFFCC                   ; $10000-$FFCC = 52
     226/    2141 : DF 01               Z2141           STX     STRSCTH                  ; 26 or 52 until overflow
     227/    2143 : D6 02               Z2143           LDAB    STRSCTL                  ; 
     228/    2145 : DB 04                               ADDB    NUMSCTL                  ; contains 26 or 52 according to SS or DS
     229/    2147 : D7 02                               STAB    STRSCTL                  ; 
     230/    2149 : D6 01                               LDAB    STRSCTH                  ; 
     231/    214B : C9 00                               ADCB    #$00                     ; 
     232/    214D : D7 01                               STAB    STRSCTH                  ; 
     233/    214F : 4A                                  DECA                             ; 
     234/    2150 : 2A F1                               BPL     Z2143                    ; 
     235/    2152 : 7E 23 6D            Z2152           JMP     Z236D   ; 2152: 7E 23 6D   ; Different from v300!
     236/    2155 :                     ;NXTTRK          JSR     SEEK         ;EXORDISK   ; get to next track
     237/    2155 : 25 9D               NXTTRK          BCS     Z20F4                    ; error or done
     238/    2157 : 96 24                               LDAA    M0024                    ; init w. $10
     239/    2159 : 44                                  LSRA                             ; 
     240/    215A : 44                                  LSRA                             ; 
     241/    215B : 44                                  LSRA                             ; 
     242/    215C : 44                                  LSRA                             ; should be 1
     243/    215D : 9B 22                               ADDA    TRKNOW                   ; should be 0 but gets increased (Track?)
     244/    215F : F6 EC 00                            LDAB    PIAREGA                  ; Load PIAA
     245/    2162 : CA 04                               ORAB    #$04                     ; isolate bit 2 (TG43)
     246/    2164 : 81 2B                               CMPA    #$2B                     ; check for Track > 43
     247/    2166 : 23 02                               BLS     Z216A                    ; No
     248/    2168 : C4 FB                               ANDB    #$FB                     ; Clr Bit 2 (TG43 on PA2)
     249/    216A : F7 EC 00            Z216A           STAB    PIAREGA                  ; write
     250/    216D : 86 01                               LDAA    #$01                     ; 
     251/    216F : 97 23                               STAA    SECNUM                   ; init w. 1
     252/    2171 : B6 EC 01                            LDAA    PIAREGB                  ; |
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 13 - 02/18/2026 05:54:45 PM


     253/    2174 : 8A 40                               ORAA    #$40                     ; set Bit 6 (DS3(SIDE) high)
     254/    2176 : B7 EC 01            Z2176           STAA    PIAREGB                  ; or coming from JMP write $23 (DS2, PB0(Reset inact.); WG high, DS3(SIDE) low)
     255/    2179 : BD 22 B0                            JSR     SETUPNMI                 ; X is on PIAREGA now, also Rerigger NMI Timer
     256/    217C : C6 27                               LDAB    #$27                     ; Counter for below (approx. $22F5)
     257/    217E : 96 2A                               LDAA    CLKF2                    ; |
     258/    2180 : 4A                  Z2180           DECA                             ; |
     259/    2181 : 26 FD                               BNE     Z2180                    ; wait
     260/    2183 : CE C0 DA                            LDX     #$C0DA                   ; RXRs, TXRs, Sel. CR2 | PC12 - SM Inhibit, 8-Bit, TX Syn 
     261/    2186 : FF EC 04                            STX     SSDA_0                   ; |
     262/    2189 : CE C1 FF                            LDX     #$C1FF                   ; RXRs, TXRs, Sel. Sync Code Reg. | $FF Sync 
     263/    218C : FF EC 04                            STX     SSDA_0                   ; |
     264/    218F : CE 82 70                            LDX     #$8270                   ; RXRs, Sel. CR3 | 1 Sync Char., Clr. CTS, Clr. TUF 
     265/    2192 : FF EC 04                            STX     SSDA_0                   ; |
     266/    2195 : B6 EC 01                            LDAA    PIAREGB                  ; |
     267/    2198 : 84 F2                               ANDA    #$F2                     ; clr bit 0,2,3 (RESET, WRITE, SHIFT-CRC)
     268/    219A : B7 EC 01                            STAA    PIAREGB                  ; |
     269/    219D : 98 24               Z219D           EORA    M0024                    ; init w. $10 (do A EXOR $10) basically check PB4 and toggle it
     270/    219F : 85 10                               BITA    #$10                     ; check PB4 (WPROT)
     271/    21A1 : 26 0A                               BNE     WRITID                   ; if PB4 was low then continue ** THIS IS THE OPPOSITE OF EXORDISK2 ROM **
     272/    21A3 : BD 22 D0                            JSR     Z22D0                    ; Init PIA
     273/    21A6 : 86 32                               LDAA    #$32                     ; |
     274/    21A8 : 97 08                               STAA    FDSTAT                   ; Error: "DISK WRITE PROTECTED"
     275/    21AA : 7E 21 0A                            JMP     Z210A                    ; Output Error "PROM I/O..."
     276/    21AD :                     ;------------------------------------------------
     277/    21AD : 84 60               WRITID          ANDA    #$60                     ; Clear all except Bit 5,6 (DS2 and DS3(SIDE) )
     278/    21AF : B7 EC 01                            STAA    PIAREGB                  ; 
     279/    21B2 : B6 EC 03            Z21B2           LDAA    PIACTRLB                 ; |
     280/    21B5 : 2A FB                               BPL     Z21B2                    ; Wait for IRQB on CB1 (IDX)
     281/    21B7 : CE 82 10                            LDX     #$8210                   ; RXRs, Sel. CR3 | Clr TUF
     282/    21BA : FF EC 04                            STX     SSDA_0                   ; |
     283/    21BD : BD 22 E2                            JSR     Z22E2                    ; 
     284/    21C0 : CE 83 F7                            LDX     #$83F7                   ; RXRs, sel. TxFIFO | $F7 Transmit FIFO
     285/    21C3 : FF EC 04                            STX     SSDA_0                   ; |
     286/    21C6 : 86 7A                               LDAA    #$7A                     ; ?
     287/    21C8 : B7 EC 05                            STAA    SSDA_1                   ; |
     288/    21CB : CE 81 FF                            LDX     #$81FF                   ; RXRs, Sel Sync Code Reg. | $FF > Sync Code
     289/    21CE : FF EC 04                            STX     SSDA_0                   ; 
     290/    21D1 : C6 17                               LDAB    #$17                     ; 
     291/    21D3 : 86 18               NXTSEC          LDAA    #$18                     ; 
     292/    21D5 : CE 82 10                            LDX     #$8210                   ; RXRs, Sel. CR3 | Clr. TUF
     293/    21D8 : FF EC 04                            STX     SSDA_0                   ; |
     294/    21DB : B5 EC 04            Z21DB           BITA    SSDA_0                   ; |
     295/    21DE : 27 FB                               BEQ     Z21DB                    ; wait for Transmitter empty
     296/    21E0 : B7 EC 05                            STAA    SSDA_1                   ; CR2<$18 - 8-bit word
     297/    21E3 : B5 EC 04            Z21E3           BITA    SSDA_0                   ; |
     298/    21E6 : 27 FB                               BEQ     Z21E3                    ; wait for Transmitter empty
     299/    21E8 : CE C2 70                            LDX     #$C270                   ; RXRs, TXRs, sel. CR3 | 1 Sync Char, Clr. CTS, Clr. TUF
     300/    21EB : FF EC 04                            STX     SSDA_0                   ; |
     301/    21EE : 85 00               M21EE           BITA    #$00                     ; < gets patched to $01BD - NOP, JSR M22AB or $2000 - BRA M21F0
     302/    21F0 : 86 82               M21F0           LDAA    #$82                     ; < gets patched to $22AB - used only with JSR from above!
     303/    21F2 : 7C EC 01                            INC     PIAREGB                  ; |
     304/    21F5 : 7A EC 01                            DEC     PIAREGB                  ; Toggle PB0 (RESET)
     305/    21F8 : B7 EC 04                            STAA    SSDA_0                   ; A is still $82, CR1: RXRs, Sel. CR3
     306/    21FB : BD 22 E2                            JSR     Z22E2                    ; 
     307/    21FE : CE 83 F5                            LDX     #$83F5                   ; RXRs, sel. TxFIFO | $F5 Transmit FIFO (Sync Code)
     308/    2201 : FF EC 04                            STX     SSDA_0                   ; |
     309/    2204 : C6 7E                               LDAB    #$7E                     ; ID address mark 
     310/    2206 : 86 40                               LDAA    #$40                     ; 
     311/    2208 : F7 EC 05                            STAB    SSDA_1                   ; Store ID mark 
     312/    220B : B5 EC 04            Z220B           BITA    SSDA_0                   ; |
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 14 - 02/18/2026 05:54:45 PM


     313/    220E : 27 FB                               BEQ     Z220B                    ; Wait for TX FIFO write to finish
     314/    2210 : D6 22                               LDAB    TRKNOW                   ; |
     315/    2212 : F7 EC 05                            STAB    SSDA_1                   ; Store Track#
     316/    2215 : 5F                                  CLRB                             ; |
     317/    2216 : F7 EC 05                            STAB    SSDA_1                   ; Write 0
     318/    2219 : B5 EC 04            Z2219           BITA    SSDA_0                   ; |
     319/    221C : 27 FB                               BEQ     Z2219                    ; Wait for TX FIFO write to finish
     320/    221E : D6 23                               LDAB    SECNUM                   ; init w. 1
     321/    2220 : F7 EC 05                            STAB    SSDA_1                   ; Store Sector#
     322/    2223 : 5F                                  CLRB                             ; |
     323/    2224 : F7 EC 05                            STAB    SSDA_1                   ; write 0
     324/    2227 : B5 EC 04            Z2227           BITA    SSDA_0                   ; |
     325/    222A : 27 FB                               BEQ     Z2227                    ; Wait for TX FIFO write to finish
     326/    222C : F7 EC 05                            STAB    SSDA_1                   ; write 0
     327/    222F : B5 EC 04            Z222F           BITA    SSDA_0                   ; |
     328/    2232 : 27 FB                               BEQ     Z222F                    ; Wait for TX FIFO write to finish
     329/    2234 : F6 EC 01                            LDAB    PIAREGB                  ; |
     330/    2237 : CA 08                               ORAB    #$08                     ; Set SHIFT-CRC high
     331/    2239 : F7 EC 01                            STAB    PIAREGB                  ; |
     332/    223C : F7 EC 05                            STAB    SSDA_1                   ; ?
     333/    223F : B5 EC 04            Z223F           BITA    SSDA_0                   ; Wait for TX FIFO write to finish
     334/    2242 : 27 FB                               BEQ     Z223F                    ; |
     335/    2244 : 86 FF                               LDAA    #$FF                     ; |
     336/    2246 : B7 EC 05                            STAA    SSDA_1                   ; Write Gap
     337/    2249 : 86 40                               LDAA    #$40                     ; |
     338/    224B : B5 EC 04            Z224B           BITA    SSDA_0                   ; Wait for TX FIFO write to finish
     339/    224E : 27 FB                               BEQ     Z224B                    ; |
     340/    2250 : C4 60                               ANDB    #$60                     ; Clear all bits except Bit 5,6 (DS2 and DS3(SIDE) unaffected)
     341/    2252 : F7 EC 01                            STAB    PIAREGB                  ; |
     342/    2255 : CE 81 FF                            LDX     #$81FF                   ; RXRs, Sel Sync Code Reg. | $FF > Sync Code
     343/    2258 : FF EC 04                            STX     SSDA_0                   ; |
     344/    225B : C6 AC                               LDAB    #$AC                     ; 
     345/    225D : 96 23                               LDAA    SECNUM                   ; |
     346/    225F : 4C                                  INCA                             ; incr. $23
     347/    2260 : 97 23                               STAA    SECNUM                   ; |
     348/    2262 : 81 1B                               CMPA    #$1B                     ; $1B = 27
     349/    2264 : 27 07                               BEQ     SIDEDONE                 ; 
     350/    2266 : 81 35                               CMPA    #$35                     ; $35 = 53
     351/    2268 : 27 03                               BEQ     SIDEDONE                 ; 
     352/    226A : 7E 21 D3                            JMP     NXTSEC                   ; 
     353/    226D :                     ;------------------------------------------------
     354/    226D : B6 EC 03            SIDEDONE        LDAA    PIACTRLB                 ; |
     355/    2270 : 2A FB                               BPL     SIDEDONE                 ; Wait for IRQB on CB1 (IDX)
     356/    2272 : 7A EC 01                            DEC     PIAREGB                  ; Toggle RESET
     357/    2275 : 7A EC 01                            DEC     PIAREGB                  ; 
     358/    2278 : 8D 56                               BSR     Z22D0                    ; Init PIA
     359/    227A : 96 23                               LDAA    SECNUM                   ; 
     360/    227C : 81 1B                               CMPA    #$1B                     ; $1B = 27
     361/    227E : 26 09                               BNE     WRITDAT                  ; 
     362/    2280 : 96 2C                               LDAA    EXDSKSD                  ; Bit 7 is now PA5
     363/    2282 : 2B 05                               BMI     WRITDAT                  ; check for SS or DS
     364/    2284 : 7E 23 56                            JMP     Z2356    ; 2284: 7E 23 56  ;  Different from v300!
     365/    2287 :                     ;                LDAA    #$23                     ; value for PIAREGB
     366/    2287 : 21 76                               FDB     $2176                    ; old code, not used anymore
     367/    2289 :                     ;------------------------------------------------
     368/    2289 : BD E8 72            WRITDAT         JSR     RWTEST    ;EXORDISK      ; actually write data to disk
     369/    228C : 24 03                               BCC     Z2291                    ; 
     370/    228E : 7E 23 77                            JMP     Z2377    ; 228E: 7E 23 77  ;  Different from v300!
     371/    2291 :                     ;               JMP     Z20F4                    ; Error or done
     372/    2291 :                     ;------------------------------------------------
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 15 - 02/18/2026 05:54:45 PM


     373/    2291 : 96 02               Z2291           LDAA    STRSCTL                  ; 
     374/    2293 : D6 01                               LDAB    STRSCTH                  ; 
     375/    2295 : 9B 04                               ADDA    NUMSCTL                  ; contains 26 or 52 according to SS or DS
     376/    2297 : C9 00                               ADCB    #$00                     ; 
     377/    2299 : 97 02                               STAA    STRSCTL                  ; 
     378/    229B : D7 01                               STAB    STRSCTH                  ; 
     379/    229D : 7C 00 22                            INC     TRKNOW                   ; 
     380/    22A0 : 96 21                               LDAA    LDADDRL                  ; 
     381/    22A2 : 91 22                               CMPA    TRKNOW                   ; 
     382/    22A4 : 7E 23 60                            JMP     Z2360      ; 22A4: 7E 23 60  ;  Different from v300!
     383/    22A7 :                     ;                BCS     Z22A9                    ; bail
     384/    22A7 :                     ;                JMP     NXTTRK                   ; 
     385/    22A7 : 21 52                               FDB     $2152                     ; 
     386/    22A9 :                     ;------------------------------------------------
     387/    22A9 : (MACRO)              Z22A9           SCALL   MDENT1
     387/    22A9 : 3F                           SWI
     387/    22AA : 1A                           FCB  MDENT1
     388/    22AB : 86 82               M22AB           LDAA    #$82                     ; 
     389/    22AD : 95 20                               BITA    LDADDRH                  ; 
     390/    22AF : 39                                  RTS                              ; 
     391/    22B0 :                     ;------------------------------------------------
     392/    22B0 : 07                  SETUPNMI        TPA                              ; 
     393/    22B1 : 0F                                  SEI                              ; 
     394/    22B2 : 97 2B                               STAA    STATS2                   ; 
     395/    22B4 : FE FF FC                            LDX     NMIsVC                   ; 
     396/    22B7 : DF 25                               STX     NMISAV                   ; 
     397/    22B9 : CE 23 19                            LDX     #NMI_ISR                 ; 
     398/    22BC : FF FF FC                            STX     NMIsVC                   ; 
     399/    22BF : CE EC 00                            LDX     #PIAREGA                 ; 
     400/    22C2 : 86 36                               LDAA    #$36                     ; |
     401/    22C4 : A7 03                               STAA    $03,X                    ; $36 -> PIACTRLB (CB2 Low - Trigger NMI Timer, IRQB Flag set by HL on CB1 - IDX, Select Output Reg. B)
     402/    22C6 : 86 3E                               LDAA    #$3E                     ; |
     403/    22C8 : A7 03                               STAA    $03,X                    ; $3E -> PIACTRLB (CB2 high)
     404/    22CA : E6 00                               LDAB    ,X                       ; Get Port A
     405/    22CC : 4A                                  DECA                             ; 
     406/    22CD : A7 02                               STAA    $02,X                    ; $3D -> PIACTRLA (En. IRQA interrupt by CA1 - NMI Timer, Sel. Output Reg. A, CA2 high - STEP)
     407/    22CF : 39                                  RTS                              ; 
     408/    22D0 :                     ;------------------------------------------------
     409/    22D0 : CE 3C 3E            Z22D0           LDX     #$3C3E                   ; Select both Output Reg., Set CA2 (STEP), Set CB2 (NMI Timer), IRQB (IRQ) Set by LH Transition of CB1 (IDX)
     410/    22D3 : FF EC 02                            STX     PIACTRLA                 ; 
     411/    22D6 : FE EC 00                            LDX     PIAREGA                  ; 
     412/    22D9 : DE 25                               LDX     NMISAV                   ; 
     413/    22DB : FF FF FC                            STX     NMIsVC                   ; 
     414/    22DE : 96 2B                               LDAA    STATS2                   ; 
     415/    22E0 : 06                                  TAP                              ; 
     416/    22E1 : 39                                  RTS                              ; 
     417/    22E2 :                     ;------------------------------------------------
     418/    22E2 : 86 18               Z22E2           LDAA    #$18                     ; CR3 selected
     419/    22E4 : B5 EC 04            Z22E4           BITA    SSDA_0                   ; |
     420/    22E7 : 27 FB                               BEQ     Z22E4                    ; wait for Transmitter empty
     421/    22E9 : 96 2A                               LDAA    CLKF2                    ; 
     422/    22EB : 4A                  Z22EB           DECA                             ; 
     423/    22EC : 26 FD                               BNE     Z22EB                    ; 
     424/    22EE : 86 18                               LDAA    #$18                     ; |
     425/    22F0 : B7 EC 05                            STAA    SSDA_1                   ; CR3: Clr. TUF, 8 has no effet
     426/    22F3 : 5A                                  DECB                             ; B is init to $27 above (approx. $217B)
     427/    22F4 : 26 EE                               BNE     Z22E4                    ; 
     428/    22F6 : CE 81 AA                            LDX     #$81AA                   ; RXRs, Sel. SyncCodeReg | $AA Sync
     429/    22F9 : C6 05                               LDAB    #$05                     ; 
     430/    22FB : 01                                  NOP                              ; 
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 16 - 02/18/2026 05:54:45 PM


     431/    22FC : 01                                  NOP                              ; 
     432/    22FD : FF EC 04                            STX     SSDA_0                   ; 
     433/    2300 : CE 82 10                            LDX     #$8210                   ; RxRs, Sel. CR3 | Clr. TUF
     434/    2303 : FF EC 04                            STX     SSDA_0                   ; 
     435/    2306 : B5 EC 04            Z2306           BITA    SSDA_0                   ; |
     436/    2309 : 27 FB                               BEQ     Z2306                    ; wait for Transmitter empty
     437/    230B : 96 2A                               LDAA    CLKF2                    ; 
     438/    230D : 4A                  Z230D           DECA                             ; |
     439/    230E : 26 FD                               BNE     Z230D                    ; wait
     440/    2310 : 86 18                               LDAA    #$18                     ; |
     441/    2312 : B7 EC 05                            STAA    SSDA_1                   ; CR3: Clr. TUF, 8 has no effet
     442/    2315 : 5A                                  DECB                             ; 
     443/    2316 : 26 EE                               BNE     Z2306                    ; 
     444/    2318 : 39                                  RTS                              ; 
     445/    2319 :                     ;------------------------------------------------
     446/    2319 : 9E 27               NMI_ISR         LDS     STACKSAV                 ; 
     447/    231B : 8D B3                               BSR     Z22D0                    ; Init PIA
     448/    231D : BD E8 22                            JSR     FDINIT   ;EXORDISK       ; 
     449/    2320 : 86 35                               LDAA    #$35                     ; Error: "TIMEOUT"
     450/    2322 : 97 08                               STAA    FDSTAT                   ; 
     451/    2324 : 96 23                               LDAA    SECNUM                   ; 
     452/    2326 : 4A                                  DECA                             ; 
     453/    2327 : 5F                                  CLRB                             ; 
     454/    2328 : 9B 02                               ADDA    STRSCTL                  ; 
     455/    232A : D9 01                               ADCB    STRSCTH                  ; 
     456/    232C : 7E 21 04                            JMP     Z2104                    ;
     457/    232F :                     ;------------------------------------------------
     458/    232F : 20                  M232F           FCC     ' '                      ; 
     459/    2330 : 20 20 20 20 20 20   M2330           FCC     '        '               ; 
             2336 : 20 20             
     460/    2338 : 20 20               M2338           FCC     '  '                     ; 
     461/    233A : 00 00               M233A           FDB     $0000                    ; 
     462/    233C : 00 00               M233C           FDB     $0000                    ; 
     463/    233E : 46 4F 52 4D 41 54   M233E           FCC     'FORMAT DRIVE '          ; 
             2344 : 20 44 52 49 56 45 
             234A : 20                
     464/    234B : 58 3F               DRVNUM          FCC     'X?'                     ; 
     465/    234D : 0D                                  FCB     $0d                      ; 
     466/    234E : 00 00               STORAGE         FDB     $0000                    ; 
     467/    2350 :                     ;------------------------------------------------
     468/    2350 :                     ; Here are all the Patches which makes this
     469/    2350 :                     ; Version different from 300.
     470/    2350 :                     ;------------------------------------------------
     471/    2350 : CA 08               Z2350           ORAB    #$08                     ; 2350: CA 08          
     472/    2352 : F7 EC 00                            STAB    PIAREGA                  ; 2352: F7 EC 00       
     473/    2355 : 39                                  RTS                              ; 2355: 39             
     474/    2356 : B6 EC 01            Z2356           LDAA    PIAREGB                  ; 2356: B6 EC 01       
     475/    2359 : 84 20                               ANDA    #$20                     ; 2359: 84 20          
     476/    235B : 8A 03                               ORAA    #$03                     ; 235B: 8A 03          
     477/    235D : 7E 21 76                            JMP     Z2176                    ; 235D: 7E 21 76       
     478/    2360 : 25 03               Z2360           BCS     Z2365                    ; 2360: 25 03          
     479/    2362 : 7E 23 6D                            JMP     Z236D                    ; 2362: 7E 23 6D       
     480/    2365 : 86 07               Z2365           LDAA    #$07                     ; 2365: 86 07          
     481/    2367 : BD F0 18                            JSR     XOUTCH                   ; 2367: BD F0 18       
     482/    236A : 7E 20 06                            JMP     FORMATSTART              ; 236A: 7E 20 06       
     483/    236D : 86 05               Z236D           LDAA    #$05                     ; 236D: 86 05          
     484/    236F : 97 30                               STAA    M0030                    ; 236F: 97 30          
     485/    2371 : BD E8 78            Z2371           JSR     SEEK                     ; 2371: BD E8 78       
     486/    2374 : 7E 21 55                            JMP     NXTTRK                   ; 2374: 7E 21 55       
     487/    2377 : 7A 00 30            Z2377           DEC     M0030                    ; 2377: 7A 00 30       
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 17 - 02/18/2026 05:54:45 PM


     488/    237A : 26 F5                               BNE     Z2371                    ; 237A: 26 F5          
     489/    237C : 7E 20 F4                            JMP     Z20F4                    ; 237C: 7E 20 F4       
     490/    237F :                     
     491/    237F :                     
     492/    237F :                                     END
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 18 - 02/18/2026 05:54:45 PM


  Symbol Table (* = unused):
  --------------------------

*ACK :                            6 - | *ADAX1 :                         28 - |
*ADBX1 :                         27 - | *ADDAM1 :                        16 - |
*ADDAX1 :                        29 - | *ADXBA1 :                        2A - |
*AECHO :                       FF53 - | *ALLOC1 :                        21 - |
*ALPHA1 :                        14 - | *ALUSM1 :                        1E - |
*ARCHITECTURE :                                      "x86_64-unknown-linux" - |
*ASLX1 :                         31 - | *ASRX1 :                         30 - |
*BEL :                            7 - | *BIGENDIAN :                      0 - |
*BKPINS :                      FF4F - | *BOOT1 :                         3F - |
*BRANCHEXT :                      0 - | *BRKPES :                      FF63 - |
*BRKPTS :                      FF1F - | *BS :                             8 - |
*CAN :                           18 - | *CASESENSITIVE :                  0 - |
 CBUFFS :                        AE - |  CBUFLS :                        50 - |
*CBUFPS :                        FE - | *CDBDDA :                         8 - |
*CDBDDF :                         6 - | *CDBHAD :                         4 - |
*CDBIOC :                         0 - | *CDBLEN :                         C - |
*CDBSDA :                         2 - | *CDBVDT :                         7 - |
 CDBWST :                         A - | *CHANG1 :                        1F - |
 CHFLGS :                       11E - | *CHKERR :                      E853 - |
 CHKRDY :                      20AB C | *CKBRK1 :                         D - |
 CLKF1 :                         29 - |  CLKF2 :                         2A - |
*CLOSE1 :                         3 - | *CMPAR1 :                        11 - |
*CNACIS :                      FCF4 - | *COMPMODE :                       0 - |
*CONSTPI :        3.141592653589793 - | *CPBAX1 :                        2F - |
*CR :                             D - | *CURADR :                         6 - |
 CURADRH :                        6 - |  CURDRV :                         0 - |
*CUSTOM :                         0 - | *DATE :                "02/18/2026" - |
*DC1 :                           11 - | *DC2 :                           12 - |
*DC3 :                           13 - | *DC4 :                           14 - |
*DDSCNS :                         4 - | *DDSFMC :                         1 - |
*DDSINP :                        20 - | *DDSLOG :                         2 - |
*DDSOCF :                        10 - | *DDSOUT :                        40 - |
*DDSRES :                        80 - | *DDSRWD :                         8 - |
*DEALC1 :                        22 - | *DEVDLM :                       '#' - |
*DFCLSS :                        20 - | *DIDSDT :                         C - |
*DIDSID :                         0 - | *DIDSNM :                        12 - |
*DIDSRB :                        26 - | *DIDSRN :                         A - |
*DIDSVN :                         8 - | *DIRSAT :                         C - |
*DIRSM1 :                        1C - | *DIRSNM :                         0 - |
*DIRSNU :                         E - | *DIRSRB :                         A - |
*DIRSSX :                         8 - | *DLE :                           10 - |
*DMA1 :                          19 - | *DREAD1 :                         E - |
*DRVDLM :                       ':' - |  DRVNUM :                      234B C |
*DSLOAD :                      E800 - | *DSPLX1 :                         B - |
 DSPLY1 :                         A - | *DSPLZ1 :                         C - |
*DTSCLS :                        10 - | *DTSINP :                        80 - |
*DTSNFF :                         4 - | *DTSOPI :                         1 - |
*DTSOPO :                         2 - | *DTSOPP :                         0 - |
*DTSOPU :                         3 - | *DTSOUT :                        40 - |
*DTSSIO :                        20 - | *DTSTRU :                         8 - |
*DVSINT :                         6 - | *DVSIO :                          C - |
*DVSOFF :                         3 - | *DVSON :                          0 - |
*DVSTRM :                         9 - | *DWRIT1 :                         F - |
*EDT :                            4 - | *EM :                            19 - |
 ENDOSS :                       106 - |  ENDRVS :                       110 - |
 ENDSYS :                       10A - |  ENDUSS :                       108 - |
*ENG :                            5 - | *EREAD1 :                        39 - |
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 19 - 02/18/2026 05:54:45 PM


*ERSACR :                       '9' - | *ERSCRC :                       '1' - |
*ERSDAD :                       '6' - | *ERSDMA :                       '8' - |
*ERSMRK :                       '4' - | *ERSRDY :                       '3' - |
*ERSSEK :                       '7' - | *ERSTIM :                       '5' - |
*ERSWRT :                       '2' - | *ESC :                           1B - |
*ETB :                           17 - | *ETX :                            3 - |
*EWORD1 :                        23 - | *EWRIT1 :                        3A - |
 EXDSKSD :                       2C - | *FALSE :                          0 - |
*FAMDLM :                       '*' - |  FDINIT :                      E822 - |
*FDSCMP :                         8 - | *FDSCON :                        10 - |
*FDSDEL :                        40 - | *FDSFMA :                         5 - |
*FDSFMB :                         3 - | *FDSFMC :                         7 - |
*FDSFMD :                         1 - | *FDSFML :                         2 - |
*FDSFMU :                         0 - | *FDSSYS :                        20 - |
 FDSTAT :                         8 - | *FDSWRT :                        80 - |
*FF :                             C - |  FORMATSTART :                 2006 C |
*FS :                            1C - | *FULLPMMU :                       1 - |
 GDBAS :                        112 - | *GETFD1 :                        36 - |
*GETLS1 :                         7 - | *GETRC1 :                         4 - |
*GS :                            1D - | *HAS64 :                          1 - |
*HASDSP :                         0 - | *HASFPU :                         0 - |
*HASPMMU :                        0 - | *HT :                             9 - |
*INCHNP :                      F015 - | *INEXTMODE :                      0 - |
*INLWORDMODE :                    0 - | *INMAXMODE :                      0 - |
*INSRCMODE :                      0 - | *INSUPMODE :                      0 - |
 IOCBLN :                        25 - | *IOCDBP :                         2 - |
*IOCDBS :                         4 - | *IOCDEN :                        1B - |
*IOCDTT :                         1 - | *IOCEOF :                        13 - |
*IOCFDF :                        17 - | *IOCGDW :                         8 - |
*IOCLSN :                        11 - | *IOCLUN :                         A - |
*IOCMLS :                         B - | *IOCNAM :                         B - |
*IOCRIB :                        15 - | *IOCSBE :                        21 - |
 IOCSBI :                        23 - | *IOCSBP :                        1D - |
*IOCSBS :                        1F - | *IOCSDW :                         D - |
*IOCSLS :                         F - |  IOCSTA :                         0 - |
*IOCSUF :                        13 - |  IRGSSV :                       11C - |
 IRGSUV :                       11A - | *IRGSVC :                      FFF8 - |
*ISBUFQ :                         D - | *ISCKSM :                         E - |
*ISCLOS :                         8 - | *ISDEAL :                        17 - |
*ISDELT :                        10 - | *ISDSPC :                        13 - |
*ISDTYP :                         B - | *ISDUPE :                         6 - |
*ISEOF :                          9 - | *ISEOM :                          C - |
*ISFSPC :                        12 - | *ISFTYP :                         A - |
*ISIDEN :                        15 - | *ISIVDV :                         5 - |
*ISNODV :                         1 - | *ISNOER :                         0 - |
*ISNONM :                         7 - | *ISNORV :                         3 - |
*ISNRDY :                         4 - | *ISRANG :                        11 - |
*ISRECL :                        18 - | *ISRES :                          2 - |
*ISRIB :                         16 - | *ISSECB :                        19 - |
*ISSSPC :                        14 - | *ISWRIT :                         F - |
*JOCDBE :                         6 - |  KEYIN1 :                         9 - |
 KYISSV :                       104 - |  LDADDRH :                       20 - |
 LDADDRL :                       21 - | *LDATA :                       EBE4 - |
*LDATA1 :                      EBF2 - | *LF :                             A - |
*LIST :                        EBCC - | *LISTON :                         1 - |
*LOAD1 :                         1B - | *LPINIT :                      EBC0 - |
*LSCTLN :                         5 - | *LUSRES :                        40 - |
 M000C :                          C - | *M001A :                         1A - |
 M0024 :                         24 - |  M002D :                         2D - |
 M002E :                         2E - |  M0030 :                         30 - |
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 20 - 02/18/2026 05:54:45 PM


*M0034 :                         34 - | *M004C :                         4C - |
 M00FE :                         FE - | *M01BD :                        1BD - |
*M2000 :                       2000 C | *M2004 :                       2004 C |
 M21EE :                       21EE C |  M21F0 :                       21F0 C |
*M22AB :                       22AB C |  M232F :                       232F C |
 M2330 :                       2330 C |  M2338 :                       2338 C |
 M233A :                       233A C |  M233C :                       233C C |
 M233E :                       233E C | *MACEXP :                         7 - |
*MAIDS :                       F0F3 - |  MDENT1 :                        1A - |
 MDERR1 :                        20 - |  MDOSS :                        100 - |
 MEBFE :                       EBFE - |  MEBFF :                       EBFF - |
*MERED1 :                        3D - | *MEWRT1 :                        3E - |
 MFFCC :                       FFCC - |  MFFE6 :                       FFE6 - |
*MMA1 :                          18 - | *MOMCPU :                      6800 - |
*MOMCPUNAME :                "6800" - | *MOVE1 :                         10 - |
*MREAD1 :                        3B - | *MWRIT1 :                        3C - |
*NAK :                           15 - | *NESTMAX :                      100 - |
 NMISAV :                        25 - |  NMISVC :                      FFFC - |
 NMI_ISR :                     2319 C | *NULL :                           0 - |
*NUMD1 :                         15 - | *NUMSCT :                         3 - |
 NUMSCTH :                        3 - |  NUMSCTL :                        4 - |
 NXTSEC :                      21D3 C |  NXTTRK :                      2155 C |
*OPEN1 :                          2 - | *OPTDLM :                       ';' - |
*OUTCH :                       F018 - | *PACKING :                        0 - |
*PADDING :                        0 - | *PCRLF :                       F021 - |
*PDATA :                       F024 - |  PFNAM1 :                        1D - |
 PIACTRLA :                    EC02 - |  PIACTRLB :                    EC03 - |
 PIAREGA :                     EC00 - |  PIAREGB :                     EC01 - |
*PRINT1 :                        34 - | *PRINX1 :                        35 - |
*PRNTER :                      E85A - | *PSHX1 :                         32 - |
*PULX1 :                         33 - | *PUTEF1 :                        38 - |
*PUTFD1 :                        37 - | *PUTLS1 :                         8 - |
*PUTRC1 :                         5 - | *RDCRC :                       E86F - |
*READPS :                      E86D - | *READSC :                      E869 - |
*RELAXED :                        0 - | *RELES1 :                         1 - |
*RESRV1 :                         0 - |  RESTOR :                      E875 - |
*RETRYS :                         5 - |  REVSSS :                       102 - |
*REWND1 :                         6 - |  RIBBAS :                       10E - |
*RIBSLA :                        78 - | *RIBSLB :                        75 - |
*RIBSSA :                        7A - | *RIBSSL :                        76 - |
*RS :                            1E - | *RUBOUT :                        7F - |
 RWTEST :                      E872 - | *SBITS :                       FCFD - |
*SCSBB :                         17 - | *SCSCAT :                         1 - |
*SCSCLS :                         4 - | *SCSDID :                         0 - |
*SCSDIR :                         3 - | *SCSDOS :                        18 - |
*SCSDRE :                        16 - | *SCSLOK :                         2 - |
*SCSMAX :                       7D0 - | *SCSMXD :                       FA4 - |
*SCSSIZ :                        80 - | *SCSTKD :                        34 - |
*SCSTRK :                        1A - | *SCTCNT :                         B - |
 SECNUM :                        23 - |  SECTCNT :                        B - |
 SEEK :                        E878 - |  SERRB :                       2015 C |
 SETUPNMI :                    22B0 C | *SI :                             F - |
 SIDEDONE :                    226D C | *SIDES :                          D - |
*SO :                             E - | *SOH :                            1 - |
*SPACE :                         20 - |  SSDA_0 :                      EC04 - |
 SSDA_1 :                      EC05 - |  STACKSAV :                      27 - |
 STATS2 :                        2B - | *STCHB1 :                        12 - |
*STCHR1 :                        13 - |  STORAGE :                     234E C |
*STRSCT :                         1 - |  STRSCTH :                        1 - |
 STRSCTL :                        2 - | *STX :                            2 - |
 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 21 - 02/18/2026 05:54:45 PM


*SUAX1 :                         2C - | *SUB :                           1A - |
*SUBAM1 :                        17 - | *SUBAX1 :                        2D - |
*SUBX1 :                         2B - | *SUFDLM :                       '.' - |
*SUXBA1 :                        2E - |  SWISSV :                       116 - |
 SWISUV :                       118 - | *SWISVC :                      FFFA - |
*SYEOCB :                       16A - |  SYERRS :                       114 - |
 SYIOCB :                       120 - | *SYN :                           16 - |
 SYPOCB :                       145 - | *TBAX1 :                         25 - |
*TIME :               "05:54:45 PM" - |  TRKNOW :                        22 - |
*TRUE :                           1 - | *TXBA1 :                         24 - |
*US :                            1F - | *VDSBIN :                         4 - |
*VDSGDB :                         8 - | *VDSNFF :                        80 - |
*VDSSDA :                        10 - | *VERSION :                     142F - |
 VERSSS :                       100 - | *VT :                             B - |
*WRDDAM :                      E87E - |  WRITDAT :                     2289 C |
 WRITID :                      21AD C | *WRITSC :                      E884 - |
*WRTEST :                      E87B - | *WRVERF :                      E881 - |
*XBAX1 :                         26 - |  XOUTCH :                      F018 - |
*XREGSA :                      FF1A - | *XREGSB :                      FF1B - |
*XREGSC :                      FF1C - | *XREGSP :                      FF16 - |
*XREGSS :                      FF1D - | *XREGSX :                      FF18 - |
*XSTAKS :                      FF8A - |  Z2011 :                       2011 C |
 Z2019 :                       2019 C |  Z201D :                       201D C |
 Z2024 :                       2024 C |  Z206A :                       206A C |
 Z208C :                       208C C |  Z2094 :                       2094 C |
 Z20A7 :                       20A7 C |  Z20B0 :                       20B0 C |
 Z20BA :                       20BA C |  Z20C4 :                       20C4 C |
 Z20CC :                       20CC C |  Z20D2 :                       20D2 C |
 Z20D3 :                       20D3 C |  Z20DE :                       20DE C |
 Z20F4 :                       20F4 C |  Z2104 :                       2104 C |
 Z210A :                       210A C |  Z210C :                       210C C |
 Z2117 :                       2117 C |  Z2126 :                       2126 C |
 Z212F :                       212F C |  Z2132 :                       2132 C |
 Z2141 :                       2141 C |  Z2143 :                       2143 C |
*Z2152 :                       2152 C |  Z216A :                       216A C |
 Z2176 :                       2176 C |  Z2180 :                       2180 C |
*Z219D :                       219D C |  Z21B2 :                       21B2 C |
 Z21DB :                       21DB C |  Z21E3 :                       21E3 C |
 Z220B :                       220B C |  Z2219 :                       2219 C |
 Z2227 :                       2227 C |  Z222F :                       222F C |
 Z223F :                       223F C |  Z224B :                       224B C |
 Z2291 :                       2291 C | *Z22A9 :                       22A9 C |
 Z22D0 :                       22D0 C |  Z22E2 :                       22E2 C |
 Z22E4 :                       22E4 C |  Z22EB :                       22EB C |
 Z2306 :                       2306 C |  Z230D :                       230D C |
 Z2350 :                       2350 C |  Z2356 :                       2356 C |
 Z2360 :                       2360 C |  Z2365 :                       2365 C |
 Z236D :                       236D C |  Z2371 :                       2371 C |
 Z2377 :                       2377 C | *Z80SYNTAX :                      0 - |

    451 symbols
    311 unused symbols

 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 22 - 02/18/2026 05:54:45 PM


  Defined Macros:
  ---------------

SCALL                                 | SKIP1                                
SKIP2                                 |

      3 macros

 AS V1.42 Beta [Bld 216] - Source File format305_commented.asm - Page 23 - 02/18/2026 05:54:45 PM


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.01 seconds assembly time

    945 lines source file
    963 lines incl. macro expansions
      2 passes
      0 errors
      0 warnings
